/**
 * legoui.min.js v0.5.53
 * (c) 2017 Ronghui Yu
 * @license MIT
 */
"use strict";function _interopDefault(ex){return ex&&"object"==typeof ex&&"default"in ex?ex.default:ex}function Notification(){var type=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"info",content=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-center toast-top50",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"3000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var typeArr=["success","info","warning","error"];(typeArr.indexOf(type)>=0||content)&&toastr[type](content)}function Message(){var type=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"info",content=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-center toast-top50",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"3000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var typeArr=["success","info","warning","error"];(typeArr.indexOf(type)>=0||content)&&(this.toastr&&this.toastr.remove(),this.toastr=toastr[type](content))}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$1(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$1(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$1(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$1(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$2(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$2(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$2(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$2(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$3(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$3(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$3(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$3(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$4(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$4(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$4(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$4(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$5(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$5(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$5(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$5(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$6(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$6(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$6(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$7(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$8(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$8(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$8(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$6(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$7(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$7(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$7(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$8(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$9(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$9(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$9(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck$10(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _taggedTemplateLiteral$9(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$11(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$10(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$10(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$10(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$12(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$11(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$11(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$11(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$13(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$12(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$12(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function formatDate(dateStr){var format=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return format&&dateStr?moment(dateStr,"YYYY-MM-DD HH:mm:ss").format(format):dateStr}function _taggedTemplateLiteral$12(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$14(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$13(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$13(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$13(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$15(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$14(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$14(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$14(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$16(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$15(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$15(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$15(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$17(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$16(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$16(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck$19(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _taggedTemplateLiteral$16(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$18(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$17(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$17(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$17(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$20(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$18(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$18(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$18(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$21(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$19(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$19(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck$23(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck$22(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$20(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$20(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$19(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$24(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$21(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$21(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$20(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$25(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$22(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$22(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck$26(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _on(elem,types,selector,data,fn,one){var origFn=void 0,type=void 0;if("object"===("undefined"==typeof types?"undefined":_typeof$5(types))){"string"!=typeof selector&&(data=data||selector,selector=void 0);for(type in types)_on(elem,type,selector,data,types[type],one);return elem}if(null==data&&null==fn?(fn=selector,data=selector=void 0):null==fn&&("string"==typeof selector?(fn=data,data=void 0):(fn=data,data=selector,selector=void 0)),fn===!1)fn=function(){return!1};else if(!fn)return elem;return 1===one&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),elem.each(function(){var callback=function(event){var thePermis=$(this).data("permis");if("object"==("undefined"==typeof thePermis?"undefined":_typeof$5(thePermis))){var module=thePermis.module,operate=thePermis.operate,msg=thePermis.message,userId=thePermis.userid;if(!Lego.UI.permis.check(module,operate,userId))return msg&&Lego.UI.permis.options.message(msg),void event.stopPropagation()}var _fn=fn.bind(this);_fn(event)};0==types.indexOf("click")?jQuery.event.add(this,types,callback,data,selector):jQuery.event.add(this,types,fn,data,selector)})}function _classCallCheck$30(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$26(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$26(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$23(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$29(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$25(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$25(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$22(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$28(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$24(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$24(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$21(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$27(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$23(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$23(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck$32(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _taggedTemplateLiteral$24(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$31(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$27(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$27(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$25(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$33(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$28(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$28(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$26(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$34(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$29(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$29(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$27(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$35(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$30(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$30(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{
constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$28(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$36(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$31(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$31(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$29(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$37(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$32(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$32(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$30(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$38(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$33(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$33(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$31(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$39(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$34(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$34(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$32(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$40(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$35(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$35(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _taggedTemplateLiteral$33(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck$41(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$36(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$36(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var perfectScrollbar_dist_css_perfectScrollbar_css=require("perfect-scrollbar/dist/css/perfect-scrollbar.css"),perfectScrollbar=_interopDefault(require("perfect-scrollbar")),toastr=_interopDefault(require("toastr-cjs")),toastrCjs_toastr_css=require("toastr-cjs/toastr.css"),moment=_interopDefault(require("moment")),moment_locale_zhCn=require("moment/locale/zh-cn"),bootstrapDatetimepickerCjs=require("bootstrap-datetimepicker-cjs"),bootstrapDatetimepickerCjs_css_bootstrapDatetimepicker_css=require("bootstrap-datetimepicker-cjs/css/bootstrap-datetimepicker.css"),validate=_interopDefault(require("jquery-validation-cjs")),Tether=_interopDefault(require("tether")),localresizeimg=_interopDefault(require("localresizeimg-cjs")),bootstrapRating=require("bootstrap-rating"),ztree=require("ztree");Lego.components("notification",Notification),Lego.components("message",Message),window.moment=moment;var Util={uuid:function(){function S4(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()},getDirection:function(el,dropEl){el=el instanceof $?el:$(el);var windowW=$(window).width(),windowH=$(window).height(),_X=el.offset().left,_Y=el.offset().top,elW=el.width(),elH=el.height(),dropW=dropEl.width(),dropH=dropEl.height(),upDown=dropH>windowH-_Y-elH?"top":"bottom",leftRight=dropW>windowW-_X-elW?"Right":"Left";return{_x:leftRight,_y:upDown}},animateCss:function(el,animationName,callback){el=el instanceof $?el:$(el),animationName=/\s/g.test(animationName)?animationName:"animated "+animationName;var animationEnd="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";el.addClass(animationName).one(animationEnd,function(){el.removeClass(animationName),"function"==typeof callback&&callback()})},convertByteUnit:function(size,unit,decimals,direction,targetunit){var units=["B","KB","MB","GB","TB","PB","EB"],index=void 0,targetIndex=void 0,i=void 0,l=units.length,num=void 0,regFloat=/(^[+-]?\d*(?:\.\d+)?(?:[Ee][-+]?\d+)?)([kKMmGgTtpPeE]?[bB])?$/;if("string"==typeof size&&(num=size.match(regFloat),size=num[1],unit=num[2]||unit),unit=unit||"B")for(unit=unit.toUpperCase(),i=0;i<l;i++)unit===units[i]&&(index=i),targetunit&&(targetunit+"").toUpperCase()===units[i]&&(targetIndex=i);for(void 0===direction&&(direction=void 0===targetIndex||targetIndex>index),size=parseFloat(size);(direction?size>=1024&&index<l-1:size<=1024&&index>0)&&(size=direction?size/1024:1024*size,direction?index++:index--,index!==targetIndex););return decimals?size=size.toFixed(decimals)+units[index]:(decimals=decimals||2,size=(size.toFixed(decimals)+"").replace(/\.00/,"")+units[index]),size},getExtName:function(name){var re=/\./,a=void 0,l=void 0;return re.test(name)?(a=name.split(re),l=a.length,a[l-1].toLowerCase()):null},getFileIcon:function(name,isExt){var _extMap,extMap=(_extMap={bmp:"fa fa-file-o",gif:"fa fa-file-image-o",png:"fa fa-file-image-o",jpg:"fa fa-file-image-o",jpeg:"fa fa-file-image-o",tif:"fa fa-file-text-o",psd:"fa fa-file-image-o",pdg:"fa fa-file-o",ai:"fa fa-file-image-o",ico:"fa fa-file-image-o",css:"fa fa-file-text-o",doc:"fa fa-file-word-o",docx:"fa fa-file-word-o",ppt:"fa fa-file-powerpoint-o",pptx:"fa fa-file-powerpoint-o",rar:"fa fa-file-zip-o","7z":"fa fa-file-zip-o",gz:"fa fa-file-zip-o",bz:"fa fa-file-zip-o",ace:"fa fa-file-zip-o",uha:"fa fa-file-zip-o",zpaq:"fa fa-file-zip-o"},_defineProperty(_extMap,"rar","fa fa-file-zip-o"),_defineProperty(_extMap,"txt","fa fa-file-text-o"),_defineProperty(_extMap,"yml","fa fa-file-code-o"),_defineProperty(_extMap,"ini","fa fa-file-code-o"),_defineProperty(_extMap,"js","fa fa-file-code-o"),_defineProperty(_extMap,"url","fa fa-file-code-o"),_defineProperty(_extMap,"xls","fa fa-file-excel-o"),_defineProperty(_extMap,"xlsx","fa fa-file-excel-o"),_defineProperty(_extMap,"et","fa fa-file-excel-o"),_defineProperty(_extMap,"mp3","fa fa-file-audio-o"),_defineProperty(_extMap,"mp4","fa fa-file-video-o"),_defineProperty(_extMap,"zip","fa fa-file-zip-o"),_defineProperty(_extMap,"pdf","fa fa-file-pdf-o"),_defineProperty(_extMap,"none","fa fa-file-o"),_extMap),ext=isExt?name:this.getExtName(name);return ext!==!1&&extMap[ext]?extMap[ext]:"file"},previewAble:function(nameOrExt){var fileExt=this.getExtName(nameOrExt)||nameOrExt,extMap=["bmp","gif","png","jpg","jpeg","txt","pdf","doc","docx","ppt","pptx","xls","xlsx"];return extMap.indexOf(fileExt)>=0||!1},isImg:function(name,isExt){var extMap=["bmp","gif","png","jpg","jpeg"],ext=isExt?name:this.getExtName(name);return ext!==!1&&extMap.indexOf(ext)>=0},checkBrowser:function(){var u=navigator.userAgent;return{mozilla:/firefox/.test(u.toLowerCase()),webkit:/webkit/.test(u.toLowerCase()),opera:/opera/.test(u.toLowerCase()),msie:/msie/.test(u.toLowerCase())}},urlToHref:function(str){return str=str.replace(/http[s]?:\/\/[\w.][^\,。‘’“”，《》<>{}+]*/g,"$& "),str=str.replace(/http[s]?:\/\/[\w.][^ ]*/g,'<a href="$&" target="_blank" style="color:#0092d8;">$&</a>')},filterHtml:function(str){var valiHTML=["br|img"];return this.checkBrowser.mozilla&&(str=str.replace(/(<!--\[if[^<]*?\])>([\S\s]*?)<(!\[endif\]-->)/gi,"")),str=str.replace(/_moz_dirty=""/gi,"").replace(/\[/g,"[[-").replace(/\]/g,"-]]").replace(/<\/ ?tr[^>]*>/gi,"[br]").replace(/<\/ ?td[^>]*>/gi,"    ").replace(/<(ul|dl|ol)[^>]*>/gi,"[br]").replace(/<(li|dd)[^>]*>/gi,"[br]").replace(/\<p[^>]*>/gi,"[br]").replace(/\<div[^>]*>/gi,"[br]").replace(/style=[\"\']([^\"\']+)[\"\']/gi,"").replace(new RegExp("<(/?(?:"+valiHTML.join("|")+")[^>]*)>","gi"),"[$1]").replace(new RegExp('<span([^>]*class="?at"?[^>]*)>',"gi"),"[span$1]").replace(/<[^>]*>/g,"").replace(/\[\[\-/g,"[").replace(/\-\]\]/g,"]").replace(new RegExp("\\[(/?(?:"+valiHTML.join("|")+"|span)[^\\]]*)\\]","gi"),"<$1>"),str=$.trim(str.replace(/^<br>/,"").replace(/(\<br[^>]*>){2,}/gi,"<br>"))},filterTag:function(str){return this.checkBrowser.mozilla&&(str=str.replace(/<\s*br\s*[^<]*>$/gi,"")),str.replace(/&nbsp;/gi," ").replace(/<\s*br\s*[^<]*>/gi,"\n").replace(/&amp;/gi,"&").replace(/&lt;/gi,"<").replace(/&gt;/gi,">")},unFilterTag:function(str){return str.replace(/&/gi,"&amp;").replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/\r?\n/gi,"<br>").replace(/&nbsp;/gi," ")},faceTags:["[微笑]","[撇嘴]","[色]","[发呆]","[得意]","[流泪]","[害羞]","[闭嘴]","[睡]","[大哭]","[尴尬]","[发怒]","[调皮]","[呲牙]","[惊讶]","[酷]","[冷汗]","[抓狂]","[吐]","[偷笑]","[白眼]","[傲慢]","[饥饿]","[困]","[惊恐]","[流汗]","[憨笑]","[大兵]","[奋斗]","[疑问]","[嘘]","[晕]","[敲打]","[再见]","[擦汗]","[抠鼻]","[鼓掌]","[糗大了]","[坏笑]","[左哼哼]","[右哼哼]","[哈欠]","[鄙视]","[委屈]","[快哭了]","[阴脸]","[亲亲]","[吓]","[可怜]","[菜刀]","[啤酒]","[篮球]","[乒乓球]","[咖啡]","[示爱]","[爱心]","[心碎]","[刀]","[足球]","[瓢虫]","[便便]","[拥抱]","[强]","[弱]","[握手]","[胜利]","[抱拳]","[勾引]","[拳头]","[差劲]","[爱你]","[NO]","[OK]","[可爱]","[咒骂]","[折磨]","[玫瑰]","[凋谢]","[衰]","[骷髅]","[猪头]","[闪电]","[炸弹]","[饭]","[西瓜]","[蛋糕]","[礼物]","[太阳]","[月亮]","[鞭炮]"],faceToText:function(str){var faceTags=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.faceTags,patt=new RegExp('<img face="" src=".*?f0(\\d+).gif"+/?>',"g"),newStr=str,arr=void 0;if(str.indexOf("<img")==-1)return this.filterTag(str);for(;arr=patt.exec(str);)newStr=newStr.replace(new RegExp(arr[0],"g"),faceTags[arr[1]]);return newStr=this.filterTag(newStr)},textToFace:function(str){var faceTags=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.faceTags;str=this.unFilterTag(str);var arr=str.match(/\[.*?\]/g);if(arr)for(var i=0;i<arr.length;i++){var index=faceTags.indexOf(arr[i]);index>=0&&(str=str.replace(arr[i],'<img face="" src="'+Lego.config.faceIconUri+index+'.gif"/>'))}return str},insertText:function(selector,str){var ob=selector[0];ob.focus();var selection=window.getSelection?window.getSelection():document.selection,range=selection.createRange?selection.createRange():selection.getRangeAt(0);if(window.getSelection){range.collapse(!1);var hasR=range.createContextualFragment(str),hasR_lastChild=hasR.lastChild;range.insertNode(hasR),hasR_lastChild&&(range.setEndAfter(hasR_lastChild),range.setStartAfter(hasR_lastChild)),selection.removeAllRanges(),selection.addRange(range),ob.focus()}else range.innerText(str),range.collapse(!1),range.select(),ob.focus()},getPeriod:function(type){var startDate=void 0,endDate=void 0;if(window.moment)switch(type){case 0:startDate=moment().format("YYYY-MM-DD"),endDate=moment().format("YYYY-MM-DD");break;case 1:startDate=moment().day(0).format("YYYY-MM-DD"),endDate=moment().day(6).format("YYYY-MM-DD");break;case 2:startDate=moment().format("YYYY-MM-01"),endDate=moment(startDate).add(1,"months").subtract(1,"days").format("YYYY-MM-DD");break;case 3:startDate=moment().format("YYYY-01-01"),endDate=moment().format("YYYY-12-31")}else debug.warn("依赖的moment.js插件还没安装");return{startDate:startDate,endDate:endDate}}};window.val=function(value,defaultValue){return value?"function"==typeof value?value():value:defaultValue||""},Lego.components("Util",Util);var _createClass$1=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject=_taggedTemplateLiteral(['\n        <div class="lego-loading">\n            <div class="lego-icon ',"\n            "," lego-spin-",'">\n            </div>\n            ',"\n        </div>\n        "],['\n        <div class="lego-loading">\n            <div class="lego-icon ',"\n            "," lego-spin-",'">\n            </div>\n            ',"\n        </div>\n        "]),_templateObject2=_taggedTemplateLiteral(['<div class="lego-spin-text">',"</div>"],['<div class="lego-spin-text">',"</div>"]),Loading=function(_Lego$View){function Loading(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$1(this,Loading);var options={spinning:!0,size:"",tip:"",icon:"anticon anticon-loading-3-quarters"};return Object.assign(options,opts),_possibleConstructorReturn$1(this,(Loading.__proto__||Object.getPrototypeOf(Loading)).call(this,options))}return _inherits$1(Loading,_Lego$View),_createClass$1(Loading,[{key:"render",value:function(){var opts=this.options;return this.vDom=hx(_templateObject,Lego.config.spinning&&opts.spinning?"lego-spin":"",val(opts.icon),val(opts.size),opts.tip?hx(_templateObject2,opts.tip):""),this.vDom}}]),Loading}(Lego.View);Lego.components("loading",Loading);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Baseview=function(_Lego$View){function Baseview(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,Baseview);var options={events:null,loading:!1};Object.assign(options,opts);var _this=_possibleConstructorReturn(this,(Baseview.__proto__||Object.getPrototypeOf(Baseview)).call(this,options));return _this.setEvent(),_this.renderScroll(),_this}return _inherits(Baseview,_Lego$View),_createClass(Baseview,[{key:"setEvent",value:function(){return this.unBindEvents(),this.delegateEvents(),this}},{key:"bindEvents",value:function(eventName,selector,listener){return this.$el.on(eventName+".delegateEvents"+this.options.vid,selector,listener),this}},{key:"unBindEvents",value:function(){return this.$el&&this.$el.off(".delegateEvents"+this.options.vid),this}},{key:"delegateEvents",value:function(){var events=this.options.events,delegateEventSplitter=/^(\S+)\s*(.*)$/;if(!events)return this;for(var key in events){var method=events[key];if("function"!=typeof method&&(method=this[method]),method){var match=key.match(delegateEventSplitter);this.bindEvents(match[1],match[2],method.bind(this))}}return this}},{key:"_showLoading",value:function(){var opts=this.options;this.loadingView=Lego.getView("#lego-loading-"+opts.vid),this.loadingView?this.loadingView.$el.fadeIn("fast"):(this.addCom(Object.assign({el:"#lego-loading-"+opts.vid},opts.loading||{})),this._renderComponents(),this.$el.css("position","relative"))}},{key:"_hideLoading",value:function(){var opts=this.options;this.loadingView=Lego.getView("#lego-loading-"+opts.vid),this.loadingView&&this.loadingView.$el.fadeOut("fast"),Array.isArray(opts.data)&&(opts.isNodata=!opts.data.length)}},{key:"renderScroll",value:function(){function initScroll($el){$el.each(function(index,el){var container=$(this),eventName="mousemove.ps"+index;container.hasClass("ps-container")||(container.css("position","relative"),Ps.initialize(container[0],options.scrollbar),that.$el.off(eventName).on(eventName,function(){Ps.update(container[0])}))})}var options=this.options,that=this;if(options.scrollbar){var scrollbarEl=this.$(".scrollbar").length?this.$(".scrollbar"):[];scrollbarEl.length&&initScroll(scrollbarEl),this.$el.hasClass("scrollbar")&&initScroll(this.$el)}}},{key:"importWidget",value:function(comName,callback){var that=this;/\.js/g.test(comName)?Lego.loadScript(comName,function(){"function"==typeof callback&&callback(that)},comName):Lego.UI[comName]?"function"==typeof callback&&callback(this):(Lego.loadCss(Lego.config.rootUri+"widget/"+comName+"/app.css",comName),Lego.loadScript(Lego.config.rootUri+"widget/"+comName+"/app.js",function(){"function"==typeof callback&&callback(that)},comName))}}]),Baseview}(Lego.View);Lego.components("Baseview",Baseview),window.Ps=perfectScrollbar;var _createClass$2=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$1=_taggedTemplateLiteral$1(['\n        <div class="alert alert-'," "," ",'">\n            <i class="anticon '," lego-alert",'-icon" style="display:',';"></i>\n            <span class="lego-alert-message">',"</span>\n            ","\n            ","\n        </div>\n        "],['\n        <div class="alert alert-'," "," ",'">\n            <i class="anticon '," lego-alert",'-icon" style="display:',';"></i>\n            <span class="lego-alert-message">',"</span>\n            ","\n            ","\n        </div>\n        "]),_templateObject2$1=_taggedTemplateLiteral$1(['<span class="lego-alert-description">',"</span>"],['<span class="lego-alert-description">',"</span>"]),_templateObject3=_taggedTemplateLiteral$1(['<a class="lego-alert-close-icon">',"</a>"],['<a class="lego-alert-close-icon">',"</a>"]),_templateObject4=_taggedTemplateLiteral$1(['<i class="anticon anticon-cross"></i>'],['<i class="anticon anticon-cross"></i>']),Alert=function(_Lego$UI$Baseview){function Alert(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$2(this,Alert);var options={events:{"click .lego-alert-close-icon":"close"},type:"info",closable:!1,closeText:"",message:"",description:"",onClose:function(){},showIcon:!0,banner:!1};return Object.assign(options,opts),_possibleConstructorReturn$2(this,(Alert.__proto__||Object.getPrototypeOf(Alert)).call(this,options))}return _inherits$2(Alert,_Lego$UI$Baseview),_createClass$2(Alert,[{key:"render",value:function(){var options=this.options||{},iconName="";switch(options.type){case"success":iconName="check";break;case"info":iconName="info";break;case"warning":iconName="exclamation";break;case"error":iconName="cross"}var vDom=hx(_templateObject$1,options.type,options.description?"lego-alert-with-description":"",options.showIcon?"":"lego-alert-no-icon",options.description?"anticon-"+iconName+"-circle-o":"anticon-"+iconName+"-circle",options.showIcon?"":"-no",options.showIcon?"":"none",options.message,options.description?hx(_templateObject2$1,"string"==typeof options.description?options.description:""):"",options.closable?hx(_templateObject3,options.closeText||hx(_templateObject4)):"");return vDom}},{key:"close",value:function(event){var _this2=this;event.stopPropagation(),this.$el.slideUp("normal",function(){_this2.remove()}),"function"==typeof this.options.onClose&&this.options.onClose(this,event)}}]),Alert}(Lego.UI.Baseview);Lego.components("alert",Alert);var _createClass$3=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$2=_taggedTemplateLiteral$2(['\n            <div class="lego-avatar-item">\n                <div class="lego-avatar-img" style="','" id="','">\n                ',"\n                </div>\n                ","\n            </div>\n            "],['\n            <div class="lego-avatar-item">\n                <div class="lego-avatar-img" style="','" id="','">\n                ',"\n                </div>\n                ","\n            </div>\n            "]),_templateObject2$2=_taggedTemplateLiteral$2(["",""],["",""]),_templateObject3$1=_taggedTemplateLiteral$2(['<i class="anticon anticon-close remove" title="删除 ','"></i>'],['<i class="anticon anticon-close remove" title="删除 ','"></i>']),_templateObject4$1=_taggedTemplateLiteral$2(['<i class="anticon anticon-swap change" title="更换 ','"></i>'],['<i class="anticon anticon-swap change" title="更换 ','"></i>']),_templateObject5=_taggedTemplateLiteral$2(["<label>","</label>"],["<label>","</label>"]),_templateObject6=_taggedTemplateLiteral$2(['\n        <div class="lego-avatar ',' clearfix">\n        ',"\n        ",'\n            <input type="hidden" value="','" name="','">\n        </div>\n        '],['\n        <div class="lego-avatar ',' clearfix">\n        ',"\n        ",'\n            <input type="hidden" value="','" name="','">\n        </div>\n        ']),_templateObject7=_taggedTemplateLiteral$2(["\n            ","\n        "],["\n            ","\n        "]),_templateObject8=_taggedTemplateLiteral$2(['\n            <div class="lego-avatar-item addbtn">\n                <div class="lego-avatar-img">\n                <i class="anticon anticon-plus add" title="添加"></i>\n                </div>\n            </div>\n            '],['\n            <div class="lego-avatar-item addbtn">\n                <div class="lego-avatar-img">\n                <i class="anticon anticon-plus add" title="添加"></i>\n                </div>\n            </div>\n            ']),Avatar=function(_Lego$UI$Baseview){function Avatar(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$3(this,Avatar);var options={events:{"click .add":"onAdd","click .remove":"onRemove","click .change":"onChange"},size:"",name:"",multiple:!1,readonly:!1,radius:"50%",showName:!0,width:"",height:"",value:[],onAdd:function(){},onRemove:function(){},onChange:function(){}};return Object.assign(options,opts),_possibleConstructorReturn$3(this,(Avatar.__proto__||Object.getPrototypeOf(Avatar)).call(this,options))}return _inherits$3(Avatar,_Lego$UI$Baseview),_createClass$3(Avatar,[{key:"render",value:function(){function getItem(data){return hx(_templateObject$2,data.value?"background-image:url("+val(data.value)+");":"",data.key,options.readonly?"":hx(_templateObject2$2,options.multiple?hx(_templateObject3$1,val(data.name)):hx(_templateObject4$1,val(data.name))),options.showName?hx(_templateObject5,val(data.name)):"")}var options=this.options,vDom=hx(_templateObject6,options.size,options.value.length?hx(_templateObject7,options.multiple?options.value.map(function(item){return getItem(item)}):getItem(options.value[0])):"",options.value.length&&!options.multiple||options.readonly?"":hx(_templateObject8),options.value.length?options.value.map(function(item){return item?item.key:""}).join(","):"",options.name);return vDom}},{key:"renderAfter",value:function(){this.options.width&&this.$el.find(".lego-avatar-img").width(this.options.width),this.options.height&&this.$el.find(".lego-avatar-img").height(this.options.height),this.$el.find(".lego-avatar-img, .lego-avatar-img i").css("border-radius",this.options.radius)}},{key:"onAdd",value:function(event){event.stopPropagation(),"function"==typeof this.options.onAdd&&this.options.onAdd(this,event)}},{key:"onRemove",value:function(event){function deleteFun(){that.options.value=that.options.value.filter(function(item){return item.key.toString()!==key}),that.refresh()}event.stopPropagation();var that=this,target=$(event.currentTarget),itemEl=target.parent(),key=itemEl.attr("id").toString();"function"==typeof this.options.onRemove?this.options.onRemove(this,key,deleteFun):deleteFun()}},{key:"onChange",value:function(event){event.stopPropagation();var target=$(event.currentTarget),itemEl=target.parent(),key=itemEl.attr("id");"function"==typeof this.options.onChange&&this.options.onChange(this,key)}}]),Avatar}(Lego.UI.Baseview);Lego.components("avatar",Avatar);var _createClass$4=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$3=_taggedTemplateLiteral$3(["<div>\n          ","\n        </div>"],["<div>\n          ","\n        </div>"]),_templateObject2$3=_taggedTemplateLiteral$3(['<a id="','" href="#/home" style="display:block;">',"</a>\n"],['<a id="','" href="#/home" style="display:block;">',"</a>\\n"]),Badge=function(_Lego$UI$Baseview){function Badge(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$4(this,Badge);var options={events:{"click #400":"theClick"}};return Object.assign(options,opts),_possibleConstructorReturn$4(this,(Badge.__proto__||Object.getPrototypeOf(Badge)).call(this,options))}return _inherits$4(Badge,_Lego$UI$Baseview),_createClass$4(Badge,[{key:"render",value:function(){var options=this.options||[],vDom=hx(_templateObject$3,options.map(function(model,i){return hx(_templateObject2$3,model.first,model.first)}));return vDom}},{key:"theClick",value:function(event){event.stopPropagation(),Lego.trigger("data_update",{aa:1})}}]),Badge}(Lego.UI.Baseview),_createClass$5=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$4=_taggedTemplateLiteral$4(['\n        <button type="','" class="btn btn-',"\n        "," ",'" ',">\n            ","\n            ","\n            ","\n        </button>\n        "],['\n        <button type="','" class="btn btn-',"\n        "," ",'" ',">\n            ","\n            ","\n            ","\n        </button>\n        "]),_templateObject2$4=_taggedTemplateLiteral$4(['<i class="','"></i>'],['<i class="','"></i>']),_templateObject3$2=_taggedTemplateLiteral$4(["<span>","</span>"],["<span>","</span>"]),Buttons=function(_Lego$UI$Baseview){function Buttons(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$5(this,Buttons);var options={events:{click:"onClick"},text:"button",type:"secondary",htmlType:"button",disabled:!1,icon:"",afterIcon:"",shape:"",size:"",loading:!1,onClick:function(){}};return Object.assign(options,opts),_possibleConstructorReturn$5(this,(Buttons.__proto__||Object.getPrototypeOf(Buttons)).call(this,options))}return _inherits$5(Buttons,_Lego$UI$Baseview),_createClass$5(Buttons,[{key:"render",value:function(){var options=this.options,vDom=hx(_templateObject$4,options.htmlType,"dashed"==options.type?"secondary lego-btn-dashed":options.type,options.size?"btn-"+options.size:"",options.shape?"lego-btn-"+options.shape:"default",options.disabled?"disabled":"",options.icon?hx(_templateObject2$4,options.icon):"",options.html||options.text?hx(_templateObject3$2,options.html||options.text):"",options.afterIcon?hx(_templateObject2$4,options.afterIcon):"");return vDom}},{key:"onClick",value:function(event){event.stopPropagation(),"function"==typeof this.options.onClick&&this.options.onClick(this,event)}}]),Buttons}(Lego.UI.Baseview);Lego.components("buttons",Buttons);var _createClass$6=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$5=_taggedTemplateLiteral$5(['\n        <div class="btn-group ','">\n        ',"\n        </div>\n        "],['\n        <div class="btn-group ','">\n        ',"\n        </div>\n        "]),_templateObject2$5=_taggedTemplateLiteral$5(['\n        <button type="button" class="btn btn-','">\n            ',"\n        </button>\n        "],['\n        <button type="button" class="btn btn-','">\n            ',"\n        </button>\n        "]),Btngroup=function(_Lego$UI$Baseview){
function Btngroup(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$6(this,Btngroup);var options={events:{"click button":"onClick"},size:"default",onClick:function(){}};return Object.assign(options,opts),_possibleConstructorReturn$6(this,(Btngroup.__proto__||Object.getPrototypeOf(Btngroup)).call(this,options))}return _inherits$6(Btngroup,_Lego$UI$Baseview),_createClass$6(Btngroup,[{key:"render",value:function(){var options=this.options,vDom=hx(_templateObject$5,"large"==options.size?"btn-group-lg":"small"==options.size?"btn-group-sm":"",options.data.map(function(item){return hx(_templateObject2$5,item.type||"secondary",val(item.html||item.text))}));return vDom}},{key:"renderAfter",value:function(){this.$("button").each(function(index,item){$(item).data("index",index)})}},{key:"onClick",value:function(event){event.stopPropagation();var target=$(event.currentTarget),index=target.data("index"),model=this.options.data[index];"function"==typeof this.options.onClick&&this.options.onClick(this,model,event)}}]),Btngroup}(Lego.UI.Baseview);Lego.components("btngroup",Btngroup);var _createClass$8=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$7=_taggedTemplateLiteral$7(["<div></div>"],["<div></div>"]),_templateObject2$7=_taggedTemplateLiteral$7(['\n            <div class="input-group ','">\n              ','\n              <input type="','" class="form-control" placeholder="','"\n              value="','" name="','" '," ","/>\n              ","\n            </div>\n            "],['\n            <div class="input-group ','">\n              ','\n              <input type="','" class="form-control" placeholder="','"\n              value="','" name="','" '," ","/>\n              ","\n            </div>\n            "]),_templateObject3$3=_taggedTemplateLiteral$7(['<span class="input-group-addon">',"</span>"],['<span class="input-group-addon">',"</span>"]),_templateObject4$2=_taggedTemplateLiteral$7(['\n                  <textarea type="textarea" class="form-control ','" placeholder="','" name="','"\n                  '," ",">","</textarea>\n                "],['\n                  <textarea type="textarea" class="form-control ','" placeholder="','" name="','"\n                  '," ",">","</textarea>\n                "]),_templateObject5$1=_taggedTemplateLiteral$7(['\n                  <input type="','" class="form-control ','" placeholder="','"\n                  value="','" name="','" '," ","/>\n                "],['\n                  <input type="','" class="form-control ','" placeholder="','"\n                  value="','" name="','" '," ","/>\n                "]),Inputs=function(_Lego$UI$Baseview){function Inputs(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$8(this,Inputs);var options={events:{keyup:"onEnter",change:"onChange"},type:"text",value:"",placeholder:"",name:"",filterReg:"",disabled:!1,readonly:!1,preAddon:"",nextAddon:"",size:"",onChange:function(){},onEnter:function(){}};Object.assign(options,opts);var _this=_possibleConstructorReturn$8(this,(Inputs.__proto__||Object.getPrototypeOf(Inputs)).call(this,options));if(options.preAddon||options.nextAddon){var onEnterFun=_this.onEnter.bind(_this),onChangeFun=_this.onChange.bind(_this);_this.$("input").keydown(onEnterFun),_this.$("input").change(onChangeFun)}return _this}return _inherits$8(Inputs,_Lego$UI$Baseview),_createClass$8(Inputs,[{key:"render",value:function(){var options=this.options||{},vDom=hx(_templateObject$7),value=options.value?Lego.UI.Util.unFilterTag(options.value.toString()):"";return vDom=options.preAddon||options.nextAddon?hx(_templateObject2$7,options.size?"input-group-"+options.size:"",options.preAddon?hx(_templateObject3$3,options.preAddon):"",options.type,options.placeholder,val(value),options.name,options.disabled?"disabled":"",options.readonly?"readonly":"",options.nextAddon?hx(_templateObject3$3,options.nextAddon):""):"textarea"==options.type?hx(_templateObject4$2,options.size?"form-control-"+options.size:"",options.placeholder,options.name,options.disabled?"disabled":"",options.readonly?"readonly":"",val(value)):hx(_templateObject5$1,options.type,options.size?"form-control-"+options.size:"",options.placeholder,val(options.value),options.name,options.disabled?"disabled":"",options.readonly?"readonly":"")}},{key:"filterStr",value:function(str){return str}},{key:"onEnter",value:function(event){var target=$(event.currentTarget),value=this.filterStr(target.val());this.options.value=value,"textarea"==this.options.type&&target.val(value),13==event.keyCode&&"function"==typeof this.options.onEnter&&this.options.onEnter(this,value,event)}},{key:"onChange",value:function(event){var target=$(event.currentTarget),value=this.filterStr(target.val());this.options.value=value,this.refresh(),"function"==typeof this.options.onChange&&this.options.onChange(this,value,event)}}]),Inputs}(Lego.UI.Baseview);Lego.components("inputs",Inputs);var _createClass$7=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$6=_taggedTemplateLiteral$6(['\n        <div class="btn-toolbar">\n        ',"\n        </div>\n        "],['\n        <div class="btn-toolbar">\n        ',"\n        </div>\n        "]),_templateObject2$6=_taggedTemplateLiteral$6(["comTag(item, index)"],["comTag(item, index)"]),Btntoolbar=function(_Lego$UI$Baseview){function Btntoolbar(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$7(this,Btntoolbar);var options={};Object.assign(options,opts);var _this=_possibleConstructorReturn$7(this,(Btntoolbar.__proto__||Object.getPrototypeOf(Btntoolbar)).call(this,options));return _this.renderCom(),_this}return _inherits$7(Btntoolbar,_Lego$UI$Baseview),_createClass$7(Btntoolbar,[{key:"render",value:function(){var options=this.options,vDom=hx(_templateObject$6,options.data.map(function(item,index){return hx(_templateObject2$6)}));return vDom}},{key:"renderCom",value:function(){var options=this.options;this.options.data.forEach(function(item,index){var tagId=[item.type,options.vid,index].join("-");Lego.create("button"==item.type?Btngroup:Inputs,Lego.extend({el:"#"+tagId},item))})}}]),Btntoolbar}(Lego.UI.Baseview);Lego.components("btntoolbar",Btntoolbar);var _createClass$9=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$8=_taggedTemplateLiteral$8(['\n        <div class="lego-chkgroup">\n        ',"\n        </div>\n        "],['\n        <div class="lego-chkgroup">\n        ',"\n        </div>\n        "]),_templateObject2$8=_taggedTemplateLiteral$8(['\n                <div class="form-check ','">\n                  <label class="form-check-label">\n                    <input class="form-check-input" type="','" name="','" value="','" '," >\n                    ","\n                  </label>\n                </div>\n                "],['\n                <div class="form-check ','">\n                  <label class="form-check-label">\n                    <input class="form-check-input" type="','" name="','" value="','" '," >\n                    ","\n                  </label>\n                </div>\n                "]),_templateObject3$4=_taggedTemplateLiteral$8(['\n                <div class="form-check form-check-inline ','">\n                    <label class="form-check-label">\n                      <input class="form-check-input" type="','" name="','" value="','" '," >\n                      ","\n                    </label>\n                </div>\n                "],['\n                <div class="form-check form-check-inline ','">\n                    <label class="form-check-label">\n                      <input class="form-check-input" type="','" name="','" value="','" '," >\n                      ","\n                    </label>\n                </div>\n                "]),Chkgroup=function(_Lego$UI$Baseview){function Chkgroup(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$9(this,Chkgroup);var options={layout:"vertical",type:"checkbox",name:"",data:[],onChange:function(){}};return Object.assign(options,opts),_possibleConstructorReturn$9(this,(Chkgroup.__proto__||Object.getPrototypeOf(Chkgroup)).call(this,options))}return _inherits$9(Chkgroup,_Lego$UI$Baseview),_createClass$9(Chkgroup,[{key:"render",value:function(){var opts=this.options,vDom=hx(_templateObject$8,opts.data.map(function(item){return"vertical"==opts.layout?hx(_templateObject2$8,item.disabled?"disabled":"",opts.type,opts.name,item.value,item.checked?"checked":"",val(item.label)):hx(_templateObject3$4,item.disabled?"disabled":"",opts.type,opts.name,item.value,item.checked?"checked":"",val(item.label))}));return vDom}},{key:"renderAfter",value:function(){var opts=this.options,that=this;this.$(".form-check-input").change(function(){var val=that.$("input.form-check-input:checked").val(),findOne=opts.data.find(function(item){return item.value==val});"function"==typeof opts.onChange&&opts.onChange(that,findOne)})}}]),Chkgroup}(Lego.UI.Baseview);Lego.components("chkgroup",Chkgroup);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass$10=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Collapse=function(){function Collapse(opts,callback){_classCallCheck$10(this,Collapse);var options={target:"",restHeight:0,realHeight:"100%",onChange:function(){}};this.callback=callback,"object"==("undefined"==typeof opts?"undefined":_typeof(opts))&&(Object.assign(options,opts),this.options=options,this.callback=options.onChange,options.restHeight?this.showHide(options.target,"animate"):this.showHide(options.target,"slideToggle")),"string"==typeof opts&&this.showHide(opts,"slideToggle")}return _createClass$10(Collapse,[{key:"showHide",value:function(target,type){var that=this;if(target=target instanceof $?target:$(target),target.length)if(target.hasClass("collapse")||target.addClass("collapse"),"animate"==type){var height=parseInt(this.options.restHeight),params=target.hasClass("show")?{height:height}:{height:this.options.realHeight};target[type](params,"normal",function(){that.handler($(this))})}else target[type]("normal",function(){that.handler($(this))})}},{key:"handler",value:function(target){if("function"==typeof this.callback){var result="";target.hasClass("show")?(result="hide",target.removeClass("show")):(result="show",target.addClass("show")),this.callback(result,target)}}}]),Collapse}(),fun=function(opts,callback){return new Collapse(opts,callback)};Lego.components("collapse",fun);var _createClass$11=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$9=_taggedTemplateLiteral$9(['<li class="divider"></li>'],['<li class="divider"></li>']),_templateObject2$9=_taggedTemplateLiteral$9(['\n                    <li>\n                    <a id="','" class="'," ",'" href="','">',"</a>\n                    </li>"],['\n                    <li>\n                    <a id="','" class="'," ",'" href="','">',"</a>\n                    </li>"]),_templateObject3$5=_taggedTemplateLiteral$9(['\n            <li class="dropdown">\n                <a id="','" class="'," ",' dropdown-toggle" href="','">',"</a>\n                ","\n            </li>\n            "],['\n            <li class="dropdown">\n                <a id="','" class="'," ",' dropdown-toggle" href="','">',"</a>\n                ","\n            </li>\n            "]),_templateObject4$3=_taggedTemplateLiteral$9(['\n                <ul class="dropdown-menu">\n                    ',"\n                </ul>\n                "],['\n                <ul class="dropdown-menu">\n                    ',"\n                </ul>\n                "]),_templateObject5$2=_taggedTemplateLiteral$9(['\n        <ul class="dropdown-menu '," ",'" style="display:','">\n            ',"\n        </ul>\n        "],['\n        <ul class="dropdown-menu '," ",'" style="display:','">\n            ',"\n        </ul>\n        "]),Dropdown=function(_Lego$UI$Baseview){function Dropdown(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$11(this,Dropdown);var options={events:{"click li:not(.dropdown)":"clickItem"},scrollbar:null,disabled:!1,eventName:"click",container:"",direction:"",activeKey:"",clickAndClose:!0,open:!1,onChange:function(){},data:[]};return Object.assign(options,opts),_possibleConstructorReturn$10(this,(Dropdown.__proto__||Object.getPrototypeOf(Dropdown)).call(this,options))}return _inherits$10(Dropdown,_Lego$UI$Baseview),_createClass$11(Dropdown,[{key:"render",value:function(){function itemNav(item){return item.divider?hx(_templateObject$9):item.children?loopNav(item):hx(_templateObject2$9,val(item.key),item.disabled||item.selected?"disabled":"",item.active?"active":"",item.href?item.href:"javascript:;",val(item.value))}function loopNav(item){return hx(_templateObject3$5,val(item.key),item.key===options.activeKey?"active":"",item.disabled?"disabled":"",item.href?item.href:"javascript:;",val(item.value),item.children?hx(_templateObject4$3,item.children.map(function(item){return itemNav(item)})):"")}var options=this.options||{},vDom=hx(_templateObject5$2,options.scrollbar?"scrollbar":"",options.direction?"drop"+options.direction:"",options.open?"block":"none",options.data.map(function(item){return itemNav(item)}));return vDom}},{key:"renderAfter",value:function(){var that=this,_eventName="click.dropdown-"+this.options.vid;if(this.container=this.options.container instanceof $?this.options.container:this.options.context.$?this.options.context.$(this.options.container):$(this.options.container),!this.options.disabled){var handler=function(event){that.$el.slideToggle("fast")};"click"==this.options.eventName?($("body, .modal-body").off(_eventName).on(_eventName,function(event){if(event.originalEvent){var index_a=event.originalEvent.path.indexOf(event.target),index_b=event.originalEvent.path.indexOf(that.container[0]);index_a<=index_b||that.close()}}),this.container.off(_eventName).on(_eventName,handler)):this.container.mouseenter(handler).mouseleave(function(){that.close()})}}},{key:"_getAlign",value:function(parent,el){var _X=parent.offset().left,windowWidth=(parent.offset().top-el.height(),$(window).width()-20),elWidth=el.width();return windowWidth>_X+elWidth?"left":"right"}},{key:"show",value:function(){this.$el.slideDown("fast")}},{key:"close",value:function(){this.$el.slideUp("fast")}},{key:"clickItem",value:function(event){event.stopPropagation();var target=$(event.currentTarget),model=this.options.data.find(function(Item){return Item.key==target.children("a").attr("id")});model&&this.options.onChange(this,model,event),this.options.clickAndClose?this.close():this.refresh()}}]),Dropdown}(Lego.UI.Baseview);Lego.components("dropdown",Dropdown);var _createClass$12=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$10=_taggedTemplateLiteral$10(['\n        <div class="btn-group '," ",'">\n            <button type="button" class="btn btn-',' dropdownbtn">','</button>\n            <button type="button" class="btn btn-',' dropdown-toggle dropdown-toggle-split">\n                <span class="sr-only">Toggle Dropdown</span>\n            </button>\n            <dropdown id="dropdown-','"></dropdown>\n        </div>\n        '],['\n        <div class="btn-group '," ",'">\n            <button type="button" class="btn btn-',' dropdownbtn">','</button>\n            <button type="button" class="btn btn-',' dropdown-toggle dropdown-toggle-split">\n                <span class="sr-only">Toggle Dropdown</span>\n            </button>\n            <dropdown id="dropdown-','"></dropdown>\n        </div>\n        ']),Dropdownbtn=function(_Lego$UI$Baseview){function Dropdownbtn(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$12(this,Dropdownbtn);var options={events:{"click button.dropdownbtn, .lego-reply-submit":"onClick"},text:"button name",btnType:"secondary",size:"default",direction:"",activeKey:"",dropdownOption:{},onClick:function(){},onChange:function(){},components:[]};Object.assign(options,opts);var _this=_possibleConstructorReturn$11(this,(Dropdownbtn.__proto__||Object.getPrototypeOf(Dropdownbtn)).call(this,options));return _this.activeItem={},_this}return _inherits$11(Dropdownbtn,_Lego$UI$Baseview),_createClass$12(Dropdownbtn,[{key:"components",value:function(){var options=this.options;this.addCom($.extend(options.dropdownOption,{el:"#dropdown-"+options.vid,container:"[view-id="+options.vid+"]",direction:options.direction,activeKey:options.activeKey,data:options.data,onChange:function(self,item,event){var theView=self.options.context;theView.activeItem=item,"function"==typeof theView.options.onChange&&theView.options.onChange(theView,item)}}))}},{key:"render",value:function(){var options=this.options,vDom=hx(_templateObject$10,"large"==options.size?"btn-group-lg":"small"==options.size?"btn-group-sm":"","up"==options.direction?"dropup":"",options.btnType,val(options.html||options.text),options.btnType,options.vid);return vDom}},{key:"renderAfter",value:function(){this.$("button").each(function(index,item){$(item).data("index",index)})}},{key:"onClick",value:function(event){event.stopPropagation(),"function"==typeof this.options.onClick&&this.options.onClick(this,this.activeItem,event)}}]),Dropdownbtn}(Lego.UI.Baseview);Lego.components("dropdownbtn",Dropdownbtn);var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass$13=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$11=_taggedTemplateLiteral$11(['\n            <div class="lego-datepicker">\n                <div class="input-group input-daterange datepicker date">\n                    <input type="text" class="form-control startDate ','" value="','" name="','" placeholder="','">\n                    <span class="input-group-addon">\n                        至\n                    </span>\n                    <input type="text" class="form-control endDate ','" value="','" name="','" placeholder="','">\n                </div>\n            </div>\n            '],['\n            <div class="lego-datepicker">\n                <div class="input-group input-daterange datepicker date">\n                    <input type="text" class="form-control startDate ','" value="','" name="','" placeholder="','">\n                    <span class="input-group-addon">\n                        至\n                    </span>\n                    <input type="text" class="form-control endDate ','" value="','" name="','" placeholder="','">\n                </div>\n            </div>\n            ']),_templateObject2$10=_taggedTemplateLiteral$11(['\n            <div class="lego-datepicker">\n                <div class="input-group date">\n                    <input class="form-control dp-input ','" type="text" value="','" name="','" placeholder="','">\n                    <span class="input-group-addon">\n                        <i class="anticon anticon-','"></i>\n                    </span>\n                </div>\n            </div>\n            '],['\n            <div class="lego-datepicker">\n                <div class="input-group date">\n                    <input class="form-control dp-input ','" type="text" value="','" name="','" placeholder="','">\n                    <span class="input-group-addon">\n                        <i class="anticon anticon-','"></i>\n                    </span>\n                </div>\n            </div>\n            ']),_templateObject3$6=_taggedTemplateLiteral$11(["<div></div>"],["<div></div>"]);moment.locale("zh-cn");var Datepicker=function(_Lego$UI$Baseview){function Datepicker(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$13(this,Datepicker);var options={events:{click:"onclick","click .input-group-addon":"showpanel","blur input":"onBlur"},type:"date",name:"",placeholder:"选择时间",disabled:!1,inline:!1,keepOpen:!1,showClose:!1,showClear:!1,size:"default",format:"time"==opts.type?"LT":"YYYY-MM-DD HH:mm:ss",value:null,startInputEl:"",startName:opts.name,startValue:"",startPlaceholder:"开始时间",endInputEl:"",endName:"",endValue:"",endPlaceholder:"结束时间",useCurrent:!1,setting:{},onBlur:function(){},onChange:function(){}};Object.assign(options,opts);var _this=_possibleConstructorReturn$12(this,(Datepicker.__proto__||Object.getPrototypeOf(Datepicker)).call(this,options));return _this.initDatepicker(),_this}return _inherits$12(Datepicker,_Lego$UI$Baseview),_createClass$13(Datepicker,[{key:"initDatepicker",value:function(){var _this2=this,options=this.options;this.oldValue=formatDate(options.value,options.format),Object.assign(options.setting,{format:options.format,keepOpen:options.keepOpen,showClose:options.showClose,showClear:options.showClear,inline:options.inline});var that=this,theEl=options.inline?options.el:".input-group input";if("range"!==options.type){var $theEl=this.$(theEl);options.inline&&($theEl=this.$el),$theEl.datepicker(options.setting),$theEl.on("dp.change",function(event){var value=$(this).val();"function"==typeof options.onChange&&options.onChange(that,formatDate(value,options.format))})}else!function(){var startEl=".startDate",endEl=".endDate";if(options.startInputEl||options.endInputEl)(options.startInputEl||options.endInputEl)&&!function(){var selector=options.startInputEl||options.endInputEl;options.startInputEl&&(options.setting.useCurrent=!1),_this2.$(theEl).datepicker(options.setting),options.endInputEl?_this2.$(theEl).on("dp.change",function(e){var _el=selector instanceof $?selector:$(selector).find(theEl);_el.data("DateTimePicker").maxDate(e.date)}):options.startInputEl&&_this2.$(theEl).on("dp.change",function(e){var _el=selector instanceof $?selector:$(selector).find(theEl);_el.data("DateTimePicker").minDate(e.date)})}();else{var startDateOpts=Object.assign({},options.setting),endDateOpts=Object.assign({},_extends({},options.setting,{useCurrent:options.useCurrent}));_this2.$(startEl).datepicker(startDateOpts),_this2.$(endEl).datepicker(endDateOpts);_this2.$(startEl).on("dp.change",function(e){that.$(endEl).data("DateTimePicker").minDate(e.date)}),_this2.$(endEl).on("dp.change",function(e){that.$(startEl).data("DateTimePicker").maxDate(e.date)})}}()}},{key:"render",value:function(){var options=this.options||{},vDom="";return"range"!=options.type||options.startInputEl||options.endInputEl||(vDom=hx(_templateObject$11,options.disabled?"disabled":"",formatDate(options.startValue,options.format),options.startName,options.startPlaceholder,options.disabled?"disabled":"",formatDate(options.endValue,options.format),options.endName,options.endPlaceholder)),("range"!==options.type||"range"==options.type&&options.startInputEl&&options.endInputEl)&&(vDom=hx(_templateObject2$10,options.disabled?"disabled":"",formatDate(val(options.value),options.format),options.name,options.placeholder,"time"==options.type?"clock-circle-o":"calendar")),options.inline&&(vDom=hx(_templateObject3$6)),vDom}},{key:"onclick",value:function(event){event.stopPropagation()}},{key:"showpanel",value:function(event){var target=$(event.currentTarget),input=target.prev("input");input.focus()}},{key:"onBlur",value:function(event){event.stopPropagation();var target=$(event.currentTarget),value=target.val();"function"==typeof this.options.onBlur&&this.options.onBlur(this,formatDate(value,this.options.format))}}]),Datepicker}(Lego.UI.Baseview);Lego.components("datepicker",Datepicker);var _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass$14=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$12=_taggedTemplateLiteral$12(['\n        <div class="lego-editcom clearfix ','">\n            <span>',"\n            </span>\n            ","\n            ","\n        </div>\n        "],['\n        <div class="lego-editcom clearfix ','">\n            <span>',"\n            </span>\n            ","\n            ","\n        </div>\n        "]),_templateObject2$11=_taggedTemplateLiteral$12(['<i class="anticon anticon-',' edit" title="编辑"></i>'],['<i class="anticon anticon-',' edit" title="编辑"></i>']),_templateObject3$7=_taggedTemplateLiteral$12(['<i class="anticon anticon-close-circle cancel" title="取消编辑"></i>'],['<i class="anticon anticon-close-circle cancel" title="取消编辑"></i>']),Editcom=function(_Lego$UI$Baseview){function Editcom(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$14(this,Editcom);var options={events:{"click i.edit":"onClick","click i.cancel":"onClose"},text:"",html:"",template:"",width:"auto",clicked:!1,readonly:!1,data:[],icon:"edit",size:"",onEdit:function(){},onCancel:function(){},onFinish:function(){},components:[]};return Object.assign(options,opts),_possibleConstructorReturn$13(this,(Editcom.__proto__||Object.getPrototypeOf(Editcom)).call(this,options))}return _inherits$13(Editcom,_Lego$UI$Baseview),_createClass$14(Editcom,[{key:"renderBefore",value:function(){var opts=this.options;opts.components.length&&opts.components.forEach(function(item){item.key=(item.key||"editcom_")+opts.vid,item.el="#"+item.key,item.size=opts.size,opts.width&&(item.style=item.style||{},item.style.width=opts.width),item.value=opts.value||opts.text})}},{key:"render",value:function(){var opts=this.options,vDom=hx(_templateObject$12,opts.size,opts.clicked?opts.template?val(opts.template):opts.components.map(function(item){return hx("<"+item.comName+" id="+item.key+"></"+item.comName+">")}):val(opts.html||opts.text),opts.readonly||opts.clicked?"":hx(_templateObject2$11,val(opts.icon)),!opts.readonly&&opts.clicked?hx(_templateObject3$7):"");return vDom}},{key:"onClick",value:function(event){event.stopPropagation(),this.options.clicked=!0,"function"==typeof this.options.onEdit&&this.options.onEdit(this,event)}},{key:"onClose",value:function(event){event.stopPropagation(),this.close(),"function"==typeof this.options.onCancel&&this.options.onCancel(this,event)}},{key:"close",value:function(value,htmlStr){var opts={};opts.clicked=!1,value&&("object"==("undefined"==typeof value?"undefined":_typeof$1(value))?value.value&&(opts.value=opts.text=value.value):opts.value=opts.text=value,htmlStr&&(opts.html=htmlStr)),Object.assign(this.options,opts),this.refresh(),"function"==typeof this.options.onFinish&&this.options.onFinish(this)}}]),Editcom}(Lego.UI.Baseview);Lego.components("editcom",Editcom);var _createClass$15=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$13=_taggedTemplateLiteral$13(['<div>\n                    <button type="submit" class="btn btn-primary">','</button>\n                    <button type="reset" class="btn btn-secondary">',"</button>\n                    </div>"],['<div>\n                    <button type="submit" class="btn btn-primary">','</button>\n                    <button type="reset" class="btn btn-secondary">',"</button>\n                    </div>"]),_templateObject2$12=_taggedTemplateLiteral$13(['\n                    <div class="form-group row">\n                      <div class="offset-sm-'," col-sm-",'">\n                        <button type="submit" class="btn btn-primary">','</button>\n                        <button type="reset" class="btn btn-secondary">',"</button>\n                      </div>\n                    </div>\n                    "],['\n                    <div class="form-group row">\n                      <div class="offset-sm-'," col-sm-",'">\n                        <button type="submit" class="btn btn-primary">','</button>\n                        <button type="reset" class="btn btn-secondary">',"</button>\n                      </div>\n                    </div>\n                    "]),_templateObject3$8=_taggedTemplateLiteral$13(['<p class="form-control-static mb-0">',"</p>"],['<p class="form-control-static mb-0">',"</p>"]),_templateObject4$4=_taggedTemplateLiteral$13(['\n                <div class="form-group">\n                    <label for="','">',"","</label>\n                    ","\n                    ","\n                </div>\n                "],['\n                <div class="form-group">\n                    <label for="','">',"","</label>\n                    ","\n                    ","\n                </div>\n                "]),_templateObject5$3=_taggedTemplateLiteral$13(['<span class="symbol required">*</span>'],['<span class="symbol required">*</span>']),_templateObject6$1=_taggedTemplateLiteral$13(['<small class="form-text text-muted">',"</small>"],['<small class="form-text text-muted">',"</small>"]),_templateObject7$1=_taggedTemplateLiteral$13(['\n                <div class="form-group row">\n                  <label for="','" class="col-sm-',' col-form-label">',"",'</label>\n                  <div class="col-sm-','">\n                    ',"\n                    ","\n                  </div>\n                </div>\n                "],['\n                <div class="form-group row">\n                  <label for="','" class="col-sm-',' col-form-label">',"",'</label>\n                  <div class="col-sm-','">\n                    ',"\n                    ","\n                  </div>\n                </div>\n                "]),_templateObject8$1=_taggedTemplateLiteral$13(['\n                <fieldset class="','">\n                    <legend>',"</legend>\n                    ","\n                </fieldset>\n                "],['\n                <fieldset class="','">\n                    <legend>',"</legend>\n                    ","\n                </fieldset>\n                "]),_templateObject9=_taggedTemplateLiteral$13(["<form>\n            ","\n            ","</form>"],["<form>\n            ","\n            ","</form>"]);
$.fn.validate=validate;var Forms=function(_Lego$UI$Baseview){function Forms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$15(this,Forms);var options={layout:"vertical",setDefaults:{errorClass:"form-control-feedback",errorElement:"div",errorPlacement:function(error,element){element.closest(".form-group").children("div").append(error)},highlight:function(element,errorClass){$(element).closest(".form-group").addClass("has-danger")},success:function(el){el.closest(".form-group").removeClass("has-danger"),el.closest("div.form-control-feedback").remove()},submitHandler:function(form){var view=Lego.getView(opts.el);view&&view.submitForm()},rules:{},messages:{}},labelCols:2,comCols:10,submitEl:"",submitText:"提 交",showSubmit:!0,resetText:"重 置",data:[],format:function(result){return result},onSubmit:function(){}};Object.assign(options,opts);var _this=_possibleConstructorReturn$14(this,(Forms.__proto__||Object.getPrototypeOf(Forms)).call(this,options));return _this.renderCom(),_this}return _inherits$14(Forms,_Lego$UI$Baseview),_createClass$15(Forms,[{key:"render",value:function(){function submitBtn(){var submit="";return!options.submitEl&&options.showSubmit&&(submit="vertical"==options.layout?hx(_templateObject$13,options.submitText,options.resetText):hx(_templateObject2$12,options.labelCols,options.comCols,options.submitText,options.resetText)),submit}function layoutItem(item,layout,id){var vDom="",comTag="";return comTag=item.text?hx(_templateObject3$8,val(item.text)):item.component&&item.component.comName?hx("<"+val(item.component.comName)+" id="+id+"></"+val(item.component.comName)+">"):"",vDom="vertical"==layout?hx(_templateObject4$4,id,val(item.label),(item.rule||item.required)&&(item.rule.required||item.required)?hx(_templateObject5$3):"",comTag,item.help?hx(_templateObject6$1,val(item.help)):""):hx(_templateObject7$1,id,that.options.labelCols,val(item.label),(item.rule||item.required)&&(item.rule.required||item.required)?hx(_templateObject5$3):"",that.options.comCols,comTag,item.help?hx(_templateObject6$1,val(item.help)):"")}function loopItem(data,index,layout){var vDom="",comId=["component",options.vid,index];return vDom=data.items?hx(_templateObject8$1,val(data.labelClass),val(data.label),data.items.map(function(item,i){return comId.push(i),layoutItem(item,layout,comId.join("_"))})):layoutItem(data,layout,comId.join("_"))}var options=this.options||{},that=this,vDom=hx(_templateObject9,options.data.map(function(item,i){return loopItem(item,i,options.layout)}),submitBtn());return vDom}},{key:"renderCom",value:function(){var _this2=this,that=this;this.rules=null,this.messages=null;var components=this.options.data,comArr=["selects","treeselect"];components="function"==typeof components?components(this.options):Array.isArray(components)?components:[components],components.map(function(item,index){item.text||!function(){var comId=["component",that.options.vid,index];if(item.items)item.items.map(function(subItem,i){if(subItem.component){if(subItem.rule&&subItem.message){that.rules=that.options.rules||{},that.messages=that.options.messages||{},subItem.required&&(subItem.rule.required=!0);var theName=comArr.includes(subItem.component.comName)?"hidden_"+subItem.component.name:subItem.component.name;that.options.setDefaults.rules[theName]=subItem.rule,that.options.setDefaults.messages[theName]=subItem.message}comId.push(i),subItem.component.el="#"+comId.join("_"),subItem.component.context=that,subItem.component.comName&&Lego.create(Lego.UI[subItem.component.comName],subItem.component)}});else if(item.component){if(item.rule&&item.message){_this2.rules=_this2.options.rules||{},_this2.messages=_this2.options.messages||{},item.required&&(item.rule.required=!0);var theName=comArr.includes(item.component.comName)?"hidden_"+item.component.name:item.component.name;_this2.options.setDefaults.rules[theName]=item.rule,_this2.options.setDefaults.messages[theName]=item.message}item.component.el="#"+comId.join("_"),item.component.context=_this2,item.component.comName&&Lego.create(Lego.UI[item.component.comName],item.component)}}()});var clickName="click.form_"+this.options.vid,submitEl=this.options.submitEl,$submitEl=submitEl instanceof $?submitEl:$(("string"==typeof submitEl?submitEl:"")||'[type="submit"]');this.rules&&this.messages?(this.$el.validate(this.options.setDefaults),$submitEl.length&&$submitEl.off(clickName).on(clickName,function(event){that.$el.submit()})):$submitEl.off(clickName).on(clickName,function(event){that.submitForm()}),this.$el.attr("onSubmit","javascript:return false;")}},{key:"serializeJson",value:function(){var data={},formData=this.$el.serializeArray();return formData.forEach(function(item,index){item.value&&item.name.indexOf("hidden_")<0&&(data[item.name]?(Array.isArray(data[item.name])||(data[item.name]=[data[item.name]]),data.indexOf(item.value)<0&&data[item.name].push(item.value)):data[item.name]=item.value)}),data}},{key:"submitForm",value:function(){var format=this.options.format,submitEl=this.options.submitEl,$submitEl=submitEl instanceof $?submitEl:this.$(("string"==typeof submitEl?submitEl:"")||'[type="submit"]'),data=this.serializeJson();return"function"==typeof format&&(data=format(data)),!Lego.isEmptyObject(data)&&($submitEl.hasClass("disabled")||$submitEl.text("提交中...").addClass("disabled"),this.options.onSubmit(this,data))}},{key:"reset",value:function(){this.el.reset()}}]),Forms}(Lego.UI.Baseview);Lego.components("forms",Forms);var _createClass$16=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$14=_taggedTemplateLiteral$14(['\n        <div class="lego-facial">\n            ','\n            <div class="dropdown-menu clearfix ','">\n                <ul>\n                ',"\n                </ul>\n            </div>\n        </div>\n        "],['\n        <div class="lego-facial">\n            ','\n            <div class="dropdown-menu clearfix ','">\n                <ul>\n                ',"\n                </ul>\n            </div>\n        </div>\n        "]),_templateObject2$13=_taggedTemplateLiteral$14(['<i class="lego-facial-trigger">',"</i>"],['<i class="lego-facial-trigger">',"</i>"]),_templateObject3$9=_taggedTemplateLiteral$14(['<i class="lego-facial-trigger ','"></i>'],['<i class="lego-facial-trigger ','"></i>']),_templateObject4$5=_taggedTemplateLiteral$14(['\n                    <li class="lego-facial-item ',"",'"><a href="javascript:void(0);"\n                    title="','"><img src="',"",'.gif" /></a></li>\n                '],['\n                    <li class="lego-facial-item ',"",'"><a href="javascript:void(0);"\n                    title="','"><img src="',"",'.gif" /></a></li>\n                ']),Facial=function(_Lego$UI$Baseview){function Facial(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$16(this,Facial);var options={events:{"click .lego-facial-item a":"clickItem"},target:"",targetType:"textarea",icon:"anticon anticon-smile-o",text:"",eventName:"click",iconsUrl:"",itemClassPrefix:"f0",direction:"bottom",data:Lego.UI.Util.faceTags};Object.assign(options,opts);var _this=_possibleConstructorReturn$15(this,(Facial.__proto__||Object.getPrototypeOf(Facial)).call(this,options));_this.cursorPos=null,_this.cursorContainer=null;var that=_this;return $("body, .modal-body").click(function(){that.close()}),_this}return _inherits$15(Facial,_Lego$UI$Baseview),_createClass$16(Facial,[{key:"render",value:function(){var options=this.options,vDom=(options.data.length,hx(_templateObject$14,options.text?hx(_templateObject2$13,val(options.text)):hx(_templateObject3$9,options.icon),options.direction?"drop"+options.direction:"",options.data.map(function(item,index){return hx(_templateObject4$5,options.itemClassPrefix,index,item,options.iconsUrl||Lego.config.faceIconUri,index)})));return vDom}},{key:"renderAfter",value:function(){function handler(event){event.stopPropagation(),that.$el.toggleClass("dropdown open"),"hover"==that.options.eventName&&target.mouseleave(function(){that.close()})}var target=this.$el,that=this,targetEl=this.options.target instanceof $?this.options.target:$(this.options.target);if("click"==this.options.eventName){var _eventName="click.dropdown_"+this.options.vid;target.off(_eventName).on(_eventName,handler)}else target[this.options.eventName](handler);targetEl.off("click keyup").on("click keyup",function(event){var el=$(event.currentTarget);that.getCursorPos(el)})}},{key:"clickItem",value:function(event){event.stopPropagation();var target=$(event.currentTarget),targetEl=this.options.target instanceof $?this.options.target:$(this.options.target);"div"==this.options.targetType?this.addComma(targetEl,target.attr("title")):this.addOnPos(targetEl,target.attr("title")),this.close()}},{key:"show",value:function(event){this.$el.addClass("dropdown open")}},{key:"close",value:function(event){this.$el.removeClass("dropdown open")}},{key:"getCursorPos",value:function(el){var sel=void 0,range=void 0,that=this;setTimeout(function(){window.getSelection?(sel=window.getSelection(),range=sel.getRangeAt(0),that.cursorPos=range.startOffset,that.cursorContainer=range.startContainer):document.selection?(sel=document.selection,range=sel.createRange(),range.moveStart("character",-1),that.cursorPos=range.text.length):(el.selectionStart||"0"==el.selectionStart)&&(that.cursorPos=el.selectionStart)},0)}},{key:"addOnPos",value:function(selector,myValue){if(selector=selector[0],document.selection)selector.focus(),sel=document.selection.createRange(),sel.text=myValue,sel.select();else if(selector.selectionStart||"0"==selector.selectionStart){var startPos=selector.selectionStart,endPos=selector.selectionEnd,restoreTop=selector.scrollTop;selector.value=selector.value.substring(0,startPos)+myValue+selector.value.substring(endPos,selector.value.length),restoreTop>0&&(selector.scrollTop=restoreTop),selector.focus(),selector.selectionStart=startPos+myValue.length,selector.selectionEnd=startPos+myValue.length}else selector.value+=myValue,selector.focus()}},{key:"addComma",value:function(selector,text){var sel=void 0,range=void 0,el=selector[0];if(el.focus(),selector.html().length||(this.cursorPos=0),text="div"==this.options.targetType?Lego.UI.Util.textToFace(text,this.options.iconsUrl+this.options.itemClassPrefix):text,window.getSelection){sel=window.getSelection(),range=sel.getRangeAt(0),range.collapse(!1),this.cursorPos&&(range.collapse(!0),range.setStart(this.cursorContainer,this.cursorPos),range.setEnd(this.cursorContainer,this.cursorPos));var node=range.createContextualFragment(text),oLastNode=node.lastChild;range.insertNode(node),oLastNode&&(range.setEndAfter(oLastNode),range.setStartAfter(oLastNode)),this.cursorPos=range.startOffset,this.cursorContainer=range.startContainer,sel.removeAllRanges(),sel.addRange(range)}else document.selection&&(sel=document.selection,range=sel.createRange(),range.collapse(!0),range.setEnd(el,pos),range.setStart(el,pos),range.pasteHTML(text),range.select())}}]),Facial}(Lego.UI.Baseview);Lego.components("facial",Facial);var _createClass$17=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$15=_taggedTemplateLiteral$15(['\n        <ul class="list-group">\n        ',"\n        </ul>\n        "],['\n        <ul class="list-group">\n        ',"\n        </ul>\n        "]),_templateObject2$14=_taggedTemplateLiteral$15(['<li class="list-group-item '," "," ",'"\n                id="','">\n                ',"\n                ","\n                </li>"],['<li class="list-group-item '," "," ",'"\n                id="','">\n                ',"\n                ","\n                </li>"]),_templateObject3$10=_taggedTemplateLiteral$15(['<i title="移除" class="anticon anticon-close-circle lego-close"></i>'],['<i title="移除" class="anticon anticon-close-circle lego-close"></i>']),Listgroup=function(_Lego$UI$Baseview){function Listgroup(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$17(this,Listgroup);var options={events:{"click li.list-group-item":"onClick","click i.lego-close":"onClose"},activeKey:"",template:"",removeAble:!1,data:[],onClick:function(){},onClose:function(){}};return Object.assign(options,opts),_possibleConstructorReturn$16(this,(Listgroup.__proto__||Object.getPrototypeOf(Listgroup)).call(this,options))}return _inherits$16(Listgroup,_Lego$UI$Baseview),_createClass$17(Listgroup,[{key:"render",value:function(){var options=this.options||{},vDom=hx(_templateObject$15,options.data.map(function(item,index){return item.template?item.template:hx(_templateObject2$14,item.disabled?"disabled":"",options.activeKey==item.key?"active":"",val(item.className),val(item.key),options.removeAble?hx(_templateObject3$10):"",val(item.value))}));return vDom}},{key:"onClick",value:function(event){event.stopPropagation();var target=$(event.currentTarget),key=target.attr("id");this.options.activeKey=this.options.activeKey!=key?key:"",this.refresh(),"function"==typeof this.options.onClick&&this.options.onClick(this,key,event)}},{key:"onClose",value:function(event){event.stopPropagation();var target=$(event.currentTarget),key=target.parent().attr("id");this.options.data=this.options.data.filter(function(item){return item.key.toString()!==key.toString()}),this.refresh(),"function"==typeof this.options.onClose&&this.options.onClose(this,key,event)}}]),Listgroup}(Lego.UI.Baseview);Lego.components("listgroup",Listgroup);var Util$2=function($){function toType(obj){return{}.toString.call(obj).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function isElement(obj){return(obj[0]||obj).nodeType}function getSpecialTransitionEndEvent(){return{bindType:transition.end,delegateType:transition.end,handle:function(event){if($(event.target).is(this))return event.handleObj.handler.apply(this,arguments)}}}function transitionEndTest(){if(window.QUnit)return!1;var el=document.createElement("bootstrap");for(var name in TransitionEndEvent)if(void 0!==el.style[name])return{end:TransitionEndEvent[name]};return!1}function transitionEndEmulator(duration){var _this=this,called=!1;return $(this).one(Util.TRANSITION_END,function(){called=!0}),setTimeout(function(){called||Util.triggerTransitionEnd(_this)},duration),this}function setTransitionEndSupport(){transition=transitionEndTest(),$.fn.emulateTransitionEnd=transitionEndEmulator,Util.supportsTransitionEnd()&&($.event.special[Util.TRANSITION_END]=getSpecialTransitionEndEvent())}var transition=!1,MAX_UID=1e6,TransitionEndEvent={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},Util={TRANSITION_END:"bsTransitionEnd",getUID:function(prefix){do prefix+=~~(Math.random()*MAX_UID);while(document.getElementById(prefix));return prefix},getSelectorFromElement:function(element){var selector=element.getAttribute("data-target");return selector||(selector=element.getAttribute("href")||"",selector=/^#[a-z]/i.test(selector)?selector:null),selector},reflow:function(element){new Function("bs","return bs")(element.offsetHeight)},triggerTransitionEnd:function(element){$(element).trigger(transition.end)},supportsTransitionEnd:function(){return Boolean(transition)},typeCheckConfig:function(componentName,config,configTypes){for(var property in configTypes)if(configTypes.hasOwnProperty(property)){var expectedTypes=configTypes[property],value=config[property],valueType=void 0;if(valueType=value&&isElement(value)?"element":toType(value),!new RegExp(expectedTypes).test(valueType))throw new Error(componentName.toUpperCase()+": "+('Option "'+property+'" provided type "'+valueType+'" ')+('but expected type "'+expectedTypes+'".'))}}};return setTransitionEndSupport(),Util}(jQuery),_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass$19=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Modal$2=function($){var NAME="modal",VERSION="4.0.0-alpha.5",DATA_KEY="bs.modal",EVENT_KEY="."+DATA_KEY,DATA_API_KEY=".data-api",JQUERY_NO_CONFLICT=$.fn[NAME],TRANSITION_DURATION=300,BACKDROP_TRANSITION_DURATION=150,ESCAPE_KEYCODE=27,Default={backdrop:!0,keyboard:!0,focus:!0,show:!0},DefaultType={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},Event={HIDE:"hide"+EVENT_KEY,HIDDEN:"hidden"+EVENT_KEY,SHOW:"show"+EVENT_KEY,SHOWN:"shown"+EVENT_KEY,FOCUSIN:"focusin"+EVENT_KEY,RESIZE:"resize"+EVENT_KEY,CLICK_DISMISS:"click.dismiss"+EVENT_KEY,KEYDOWN_DISMISS:"keydown.dismiss"+EVENT_KEY,MOUSEUP_DISMISS:"mouseup.dismiss"+EVENT_KEY,MOUSEDOWN_DISMISS:"mousedown.dismiss"+EVENT_KEY,CLICK_DATA_API:"click"+EVENT_KEY+DATA_API_KEY},ClassName={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",IN:"in"},Selector={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".navbar-fixed-top, .navbar-fixed-bottom, .is-fixed"},Modal=function(){function Modal(element,config){_classCallCheck$19(this,Modal),this._config=this._getConfig(config),this._element=element,this._dialog=$(element).find(Selector.DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}return _createClass$19(Modal,[{key:"toggle",value:function(relatedTarget){return this._isShown?this.hide():this.show(relatedTarget)}},{key:"show",value:function(relatedTarget){var _this=this,showEvent=$.Event(Event.SHOW,{relatedTarget:relatedTarget});$(this._element).trigger(showEvent),this._isShown||showEvent.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),$(document.body).addClass(ClassName.OPEN),this._setEscapeEvent(),this._setResizeEvent(),$(this._element).on(Event.CLICK_DISMISS,Selector.DATA_DISMISS,$.proxy(this.hide,this)),$(this._dialog).on(Event.MOUSEDOWN_DISMISS,function(){$(_this._element).one(Event.MOUSEUP_DISMISS,function(event){$(event.target).is(_this._element)&&(_this._ignoreBackdropClick=!0)})}),this._showBackdrop($.proxy(this._showElement,this,relatedTarget)))}},{key:"hide",value:function(event){event&&event.preventDefault();var hideEvent=$.Event(Event.HIDE);$(this._element).trigger(hideEvent),this._isShown&&!hideEvent.isDefaultPrevented()&&(this._isShown=!1,this._setEscapeEvent(),this._setResizeEvent(),$(document).off(Event.FOCUSIN),$(this._element).removeClass(ClassName.IN),$(this._element).off(Event.CLICK_DISMISS),$(this._dialog).off(Event.MOUSEDOWN_DISMISS),Util$2.supportsTransitionEnd()&&$(this._element).hasClass(ClassName.FADE)?$(this._element).one(Util$2.TRANSITION_END,$.proxy(this._hideModal,this)).emulateTransitionEnd(TRANSITION_DURATION):this._hideModal())}},{key:"dispose",value:function(){$.removeData(this._element,DATA_KEY),$(window).off(EVENT_KEY),$(document).off(EVENT_KEY),$(this._element).off(EVENT_KEY),$(this._backdrop).off(EVENT_KEY),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._originalBodyPadding=null,this._scrollbarWidth=null}},{key:"_getConfig",value:function(config){return config=$.extend({},Default,config),Util$2.typeCheckConfig(NAME,config,DefaultType),config}},{key:"_showElement",value:function(relatedTarget){var _this2=this,transition=Util$2.supportsTransitionEnd()&&$(this._element).hasClass(ClassName.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,transition&&Util$2.reflow(this._element),$(this._element).addClass(ClassName.IN),this._config.focus&&this._enforceFocus();var shownEvent=$.Event(Event.SHOWN,{relatedTarget:relatedTarget}),transitionComplete=function(){_this2._config.focus&&_this2._element.focus(),$(_this2._element).trigger(shownEvent)};transition?$(this._dialog).one(Util$2.TRANSITION_END,transitionComplete).emulateTransitionEnd(TRANSITION_DURATION):transitionComplete()}},{key:"_enforceFocus",value:function(){var _this3=this;$(document).off(Event.FOCUSIN).on(Event.FOCUSIN,function(event){document===event.target||_this3._element===event.target||$(_this3._element).has(event.target).length||_this3._element.focus()})}},{key:"_setEscapeEvent",value:function(){var _this4=this;this._isShown&&this._config.keyboard?$(this._element).on(Event.KEYDOWN_DISMISS,function(event){event.which===ESCAPE_KEYCODE&&_this4.hide()}):this._isShown||$(this._element).off(Event.KEYDOWN_DISMISS)}},{key:"_setResizeEvent",value:function(){this._isShown?$(window).on(Event.RESIZE,$.proxy(this._handleUpdate,this)):$(window).off(Event.RESIZE)}},{key:"_hideModal",value:function(){var _this5=this;this._element.style.display="none",this._element.setAttribute("aria-hidden","true"),this._showBackdrop(function(){$(document.body).removeClass(ClassName.OPEN),_this5._resetAdjustments(),_this5._resetScrollbar(),$(_this5._element).trigger(Event.HIDDEN)})}},{key:"_removeBackdrop",value:function(){this._backdrop&&($(this._backdrop).remove(),this._backdrop=null)}},{key:"_showBackdrop",value:function(callback){var _this6=this,animate=$(this._element).hasClass(ClassName.FADE)?ClassName.FADE:"";if(this._isShown&&this._config.backdrop){var doAnimate=Util$2.supportsTransitionEnd()&&animate;if(this._backdrop=document.createElement("div"),this._backdrop.className=ClassName.BACKDROP,animate&&$(this._backdrop).addClass(animate),$(this._backdrop).appendTo(document.body),$(this._element).on(Event.CLICK_DISMISS,function(event){return _this6._ignoreBackdropClick?void(_this6._ignoreBackdropClick=!1):void(event.target===event.currentTarget&&("static"===_this6._config.backdrop?_this6._element.focus():_this6.hide()))}),doAnimate&&Util$2.reflow(this._backdrop),$(this._backdrop).addClass(ClassName.IN),!callback)return;if(!doAnimate)return void callback();$(this._backdrop).one(Util$2.TRANSITION_END,callback).emulateTransitionEnd(BACKDROP_TRANSITION_DURATION)}else if(!this._isShown&&this._backdrop){$(this._backdrop).removeClass(ClassName.IN);var callbackRemove=function(){_this6._removeBackdrop(),callback&&callback()};Util$2.supportsTransitionEnd()&&$(this._element).hasClass(ClassName.FADE)?$(this._backdrop).one(Util$2.TRANSITION_END,callbackRemove).emulateTransitionEnd(BACKDROP_TRANSITION_DURATION):callbackRemove()}else callback&&callback()}},{key:"_handleUpdate",value:function(){this._adjustDialog()}},{key:"_adjustDialog",value:function(){var isModalOverflowing=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&isModalOverflowing&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!isModalOverflowing&&(this._element.style.paddingRight=this._scrollbarWidth+"px")}},{key:"_resetAdjustments",value:function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}},{key:"_checkScrollbar",value:function(){this._isBodyOverflowing=document.body.clientWidth<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()}},{key:"_setScrollbar",value:function(){var bodyPadding=parseInt($(Selector.FIXED_CONTENT).css("padding-right")||0,10);this._originalBodyPadding=document.body.style.paddingRight||"",this._isBodyOverflowing&&(document.body.style.paddingRight=bodyPadding+this._scrollbarWidth+"px")}},{key:"_resetScrollbar",value:function(){document.body.style.paddingRight=this._originalBodyPadding}},{key:"_getScrollbarWidth",value:function(){var scrollDiv=document.createElement("div");scrollDiv.className=ClassName.SCROLLBAR_MEASURER,document.body.appendChild(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;return document.body.removeChild(scrollDiv),scrollbarWidth}}],[{key:"_jQueryInterface",value:function(config,relatedTarget){return this.each(function(){var data=$(this).data(DATA_KEY),_config=$.extend({},Modal.Default,$(this).data(),"object"===("undefined"==typeof config?"undefined":_typeof$2(config))&&config);if(data||(data=new Modal(this,_config),$(this).data(DATA_KEY,data)),"string"==typeof config){if(void 0===data[config])throw new Error('No method named "'+config+'"');data[config](relatedTarget)}else _config.show&&data.show(relatedTarget)})}},{key:"VERSION",get:function(){return VERSION}},{key:"Default",get:function(){return Default}}]),Modal}();return $(document).on(Event.CLICK_DATA_API,Selector.DATA_TOGGLE,function(event){var _this7=this,target=void 0,selector=Util$2.getSelectorFromElement(this);selector&&(target=$(selector)[0]);var config=$(target).data(DATA_KEY)?"toggle":$.extend({},$(target).data(),$(this).data());"A"===this.tagName&&event.preventDefault();var $target=$(target).one(Event.SHOW,function(showEvent){showEvent.isDefaultPrevented()||$target.one(Event.HIDDEN,function(){$(_this7).is(":visible")&&_this7.focus()})});Modal._jQueryInterface.call($(target),config,this)}),$.fn[NAME]=Modal._jQueryInterface,$.fn[NAME].Constructor=Modal,$.fn[NAME].noConflict=function(){return $.fn[NAME]=JQUERY_NO_CONFLICT,Modal._jQueryInterface},Modal}(jQuery),_createClass$18=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$16=_taggedTemplateLiteral$16(['\n        <div class="modal ',"\n        ","\n        ","\n        ",'" id="','">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              ','\n              <div class="modal-body ','" style="',"\n              ",'">\n                ',"\n              </div>\n              ","\n            </div>\n          </div>\n        </div>\n        "],['\n        <div class="modal ',"\n        ","\n        ","\n        ",'" id="','">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              ','\n              <div class="modal-body ','" style="',"\n              ",'">\n                ',"\n              </div>\n              ","\n            </div>\n          </div>\n        </div>\n        "]),_templateObject2$15=_taggedTemplateLiteral$16(['<div class="modal-header">\n              ','\n                <h5 class="modal-title">',"</h5>\n              </div>"],['<div class="modal-header">\n              ','\n                <h5 class="modal-title">',"</h5>\n              </div>"]),_templateObject3$11=_taggedTemplateLiteral$16(['<button type="button" class="close"><span class="anticon anticon-close"></span></button>'],['<button type="button" class="close"><span class="anticon anticon-close"></span></button>']),_templateObject4$6=_taggedTemplateLiteral$16(['<div class="modal-footer">\n              ',"\n              </div>"],['<div class="modal-footer">\n              ',"\n              </div>"]),_templateObject5$4=_taggedTemplateLiteral$16(['<div><button type="button" class="btn btn-secondary cancel" data-dismiss="modal">','</button>\n                <button type="button" class="btn btn-primary ok">',"</button></div>"],['<div><button type="button" class="btn btn-secondary cancel" data-dismiss="modal">','</button>\n                <button type="button" class="btn btn-primary ok">',"</button></div>"]),Modal=function(_Lego$UI$Baseview){function Modal(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$18(this,Modal);var typeArr={success:"anticon anticon-check-circle-o",info:"anticon anticon-info-circle-o",warning:"anticon anticon-exclamation-circle-o",error:"anticon anticon-cross-circle-o",alert:"anticon anticon-question-circle-o"},options={events:{"click .modal-footer button.ok":"clickOk","click .modal-footer button.cancel":"clickCancel","click .close":"clickCancel","click .modal-dialog":function(event){event.stopPropagation()},click:"clickBackdrop"},msgType:"",title:"提示",size:"",type:"modal",animateIn:Lego.config.animateAble?"fadeIn":"",animateOut:Lego.config.animateAble?"fadeOut":"",width:"",isMiddle:!1,closable:!0,showHeader:!0,showFooter:!0,backdrop:!0,keyboard:!0,content:"",footer:"",confirm:null,scrollbar:{},scrollAble:!0,okText:"确定",cancelText:"取消",onClose:function(){}};if(Object.assign(options,opts),options.msgType&&(options.type="dialog"),typeArr[options.msgType]&&"string"==typeof options.content){var alertObj=Lego.create(Alert,{type:options.msgType,closable:!1,message:options.content,description:!0});options.content=alertObj.render()}if(!options.el){var modalId="lego-"+options.type+"-"+options.vid;$("body").append("<"+options.type+' id="'+modalId+'"></'+options.type+">"),options.el="#"+modalId}return"layer"==options.type&&Lego.config.animateAble&&(options.animateIn="slideInRight",options.animateOut="slideOutRight"),_possibleConstructorReturn$17(this,(Modal.__proto__||Object.getPrototypeOf(Modal)).call(this,options))}return _inherits$17(Modal,_Lego$UI$Baseview),_createClass$18(Modal,[{key:"render",value:function(){var options=this.options||{},vDom=hx(_templateObject$16,"layer"==options.type?"right-modal":"",options.msgType?"dialog-modal":"",options.size?"modal-size-"+options.size:"",options.isMiddle?"middle":"",options.el.replace(/#/,""),options.showHeader?hx(_templateObject2$15,options.closable?hx(_templateObject3$11):"",options.title):"",!options.msgType&&options.scrollAble?"scrollbar":"",options.showHeader||"layer"!=options.type?"":"top:0;",options.showFooter||"layer"!=options.type?"":"bottom:0;",options.content,options.showFooter?hx(_templateObject4$6,options.footer?val(options.footer):hx(_templateObject5$4,options.cancelText,options.okText)):"");return vDom}},{key:"renderAfter",value:function(){var that=this,opts=this.options;this.$el.modal({backdrop:"layer"!==opts.type&&opts.backdrop,keyboard:opts.keyboard,show:!0}),opts.width&&this.$(".modal-dialog").width(opts.width),opts.height&&this.$(".modal-body").height(opts.height),this.$el.on("hidden.bs.modal",function(e){that.$el.remove(),"function"==typeof opts.onClose&&opts.onClose(that)}),opts.animateIn&&Lego.UI.Util.animateCss(this.$el,opts.animateIn)}},{key:"close",value:function(){var that=this;this.options.animateOut?(Lego.UI.Util.animateCss(that.$el,that.options.animateOut,function(){that.$el.modal("hide")}),this.options.backdrop&&$(".modal-backdrop").fadeOut()):this.$el.modal("hide")}},{key:"clickBackdrop",value:function(event){
event.stopPropagation(),this._onConfirm("onCancel",!0)}},{key:"_showDialog",value:function(){var that=this;Lego.create(Modal,{msgType:this.options.confirm.msgType||"warning",content:this.options.confirm.content||"",backdrop:this.options.confirm.backdrop,onOk:function(self){that.close(),self.close()}})}},{key:"_onConfirm",value:function(funName,isBackdrop){if(this.options.confirm&&this.options[funName])this._showDialog();else if(isBackdrop){var closeAble=!0;"static"==this.options.backdrop&&(closeAble=!1),"onOk"!==funName&&closeAble&&this.close()}else"onOk"!==funName&&this.close();"function"==typeof this.options[funName]&&this.options[funName](this)}},{key:"clickOk",value:function(event){event.stopPropagation(),this._onConfirm("onOk")}},{key:"clickCancel",value:function(event){event.stopPropagation(),this._onConfirm("onCancel")}}]),Modal}(Lego.UI.Baseview),theModal=function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},vid=arguments[1];if("string"==typeof opts){var type=opts.indexOf(".")>0?opts.split(".")[1]:"layer",view=Lego.getView("#lego-"+type+"-"+vid);view&&view.close()}else Lego.create(Modal,opts)};Lego.components("modal",theModal);var _createClass$20=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$17=_taggedTemplateLiteral$17(['\n            <li class="nav-item '," ",'">\n                <a class="nav-link '," "," ",'" href="','" id="','">',"</a>\n                ","\n            </li>\n            "],['\n            <li class="nav-item '," ",'">\n                <a class="nav-link '," "," ",'" href="','" id="','">',"</a>\n                ","\n            </li>\n            "]),_templateObject2$16=_taggedTemplateLiteral$17(['\n        <ul class="lego-nav ',"\n        ",'">\n            ',"\n        </ul>\n        "],['\n        <ul class="lego-nav ',"\n        ",'">\n            ',"\n        </ul>\n        "]),Navs=function(_Lego$UI$Baseview){function Navs(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$20(this,Navs);var options={events:{"mouseover .nav-item.dropdown":"overItem","click .dropdown > a":"clickNav","click .dropdown-menu a:not(.disabled)":"clickSubItem","click .nav-item:not(.dropdown) > a":"clickItem"},eventName:"click",type:"base",activeKey:"",activeValue:"",direction:"",closeAllAble:!0,accordion:!0,onClick:function(){},data:[]};return Object.assign(options,opts),_possibleConstructorReturn$18(this,(Navs.__proto__||Object.getPrototypeOf(Navs)).call(this,options))}return _inherits$18(Navs,_Lego$UI$Baseview),_createClass$20(Navs,[{key:"render",value:function(){function makeItem(item,i){var itemDom=hx(_templateObject$17,item.children?"dropdown":"",item.open?"open":"",item.key===options.activeKey?"active":"",item.disabled?"disabled":"",item.children?"dropdown-toggle":"",item.href?item.href:"javascript:;",item.key?item.key:"nav-item-"+i,val(item.value),Array.isArray(item.children)?Lego.create(Dropdown,{direction:options.direction,open:item.open,data:item.children}).render():"");return itemDom}var options=this.options,vDom=hx(_templateObject2$16,"inline"===options.type?"nav-inline":"tabs"===options.type?"nav-tabs":"pills"===options.type?"nav-pills":"","pills-stacked"===options.type?"nav-pills nav-stacked":"",options.data.map(function(item,i){return makeItem(item,i)}));return vDom}},{key:"renderAfter",value:function(){var that=this;this.options.closeAllAble&&$("body").click(function(){that.closeAll()})}},{key:"showAll",value:function(){this.$(".dropdown-menu").slideDown("fast")}},{key:"closeAll",value:function(){this.$(".dropdown-menu").slideUp("fast",function(){$(this).parent().removeClass("open")})}},{key:"overItem",value:function(event,target){var targetEl=$(event.currentTarget),key=targetEl.children("a").attr("id");this.activeKey=key}},{key:"closeDropdown",value:function(el){el.slideUp("fast",function(){"none"==$(this).css("display")?$(this).parent().removeClass("open"):$(this).parent().addClass("open")})}},{key:"clickNav",value:function(event,target){event.stopPropagation();var targetEl=$(event.currentTarget),dropdownEl=targetEl.next(".dropdown-menu"),directionResp=Lego.UI.Util.getDirection(targetEl,dropdownEl);this.options.direction=directionResp._y||"bottom",this.options.accordion&&this.closeDropdown(this.$(".nav-item.open .dropdown-menu")),this.closeDropdown(dropdownEl),dropdownEl.slideToggle("fast",function(){"none"==$(this).css("display")?$(this).parent().removeClass("open"):$(this).parent().addClass("open")}),this.clickItem(event),this.$(".dropdown-menu a").removeClass("active")}},{key:"clickItem",value:function(event,target){event.stopPropagation();var targetEl=$(event.currentTarget),key=targetEl.attr("id");if(!targetEl.hasClass("disabled")){this.options.accordion&&this.closeDropdown(this.$(".nav-item.open .dropdown-menu")),this.options.activeKey=key;var model=this.options.data.find(function(item){return item.key===key});"function"==typeof this.options.onClick&&this.options.onClick(this,model||{})}}},{key:"clickSubItem",value:function(event,target){var _this2=this;event.stopPropagation(),this.options.activeKey=this.activeKey||this.options.activeKey;var targetEl=$(event.currentTarget),key=targetEl.attr("id"),model=this.options.data.find(function(item){return item.key===_this2.options.activeKey}),subModel={};model&&model.children&&!function(){var findModel=function findModel(data){var result=data.find(function(item){return item.key===key});return result||data.forEach(function(item){item.children&&(result=findModel(item.children))}),result||{}};subModel=findModel(model.children)}(),this.$(".dropdown-menu a").removeClass("active"),this.$("#"+key).addClass("active"),"function"==typeof this.options.onClick&&this.options.onClick(this,subModel)}}]),Navs}(Lego.UI.Baseview);Lego.components("navs",Navs);var _createClass$21=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$18=_taggedTemplateLiteral$18(['\n        <div class="lego-nodata">\n            <div class="lego-icon '," ",'"></div>\n            ',"\n        </div>\n        "],['\n        <div class="lego-nodata">\n            <div class="lego-icon '," ",'"></div>\n            ',"\n        </div>\n        "]),_templateObject2$17=_taggedTemplateLiteral$18(['<div class="lego-tip-text" style="','">',"</div>"],['<div class="lego-tip-text" style="','">',"</div>"]),Nodata=function(_Lego$View){function Nodata(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$21(this,Nodata);var options={size:"",tip:"暂无数据",icon:""};return Object.assign(options,opts),_possibleConstructorReturn$19(this,(Nodata.__proto__||Object.getPrototypeOf(Nodata)).call(this,options))}return _inherits$19(Nodata,_Lego$View),_createClass$21(Nodata,[{key:"render",value:function(){var opts=this.options;return this.vDom=hx(_templateObject$18,val(opts.icon),opts.size?"lego-icon-"+opts.size:"",opts.tip?hx(_templateObject2$17,opts.icon?"margin-top:40px;":"",opts.tip):""),this.vDom}}]),Nodata}(Lego.View);Lego.components("nodata",Nodata);var _typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass$23=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();window.Tether=Tether;var Tooltip=function($){if(void 0===window.Tether)throw new Error("Bootstrap tooltips require Tether (http://tether.io/)");var NAME="tooltip",VERSION="4.0.0-alpha.5",DATA_KEY="bs.tooltip",EVENT_KEY="."+DATA_KEY,JQUERY_NO_CONFLICT=$.fn[NAME],TRANSITION_DURATION=150,CLASS_PREFIX="bs-tether",Default={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:"0 0",constraints:[]},DefaultType={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"string",constraints:"array"},AttachmentMap={TOP:"bottom center",RIGHT:"middle left",BOTTOM:"top center",LEFT:"middle right"},HoverState={IN:"in",OUT:"out"},Event={HIDE:"hide"+EVENT_KEY,HIDDEN:"hidden"+EVENT_KEY,SHOW:"show"+EVENT_KEY,SHOWN:"shown"+EVENT_KEY,INSERTED:"inserted"+EVENT_KEY,CLICK:"click"+EVENT_KEY,FOCUSIN:"focusin"+EVENT_KEY,FOCUSOUT:"focusout"+EVENT_KEY,MOUSEENTER:"mouseenter"+EVENT_KEY,MOUSELEAVE:"mouseleave"+EVENT_KEY},ClassName={FADE:"fade",IN:"in"},Selector={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner"},TetherClass={element:!1,enabled:!1},Trigger={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},Tooltip=function(){function Tooltip(element,config){_classCallCheck$23(this,Tooltip),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._tether=null,this.element=element,this.config=this._getConfig(config),this.tip=null,this._setListeners()}return _createClass$23(Tooltip,[{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"toggleEnabled",value:function(){this._isEnabled=!this._isEnabled}},{key:"toggle",value:function(event){if(event){var dataKey=this.constructor.DATA_KEY,context=$(event.currentTarget).data(dataKey);context||(context=new this.constructor(event.currentTarget,this._getDelegateConfig()),$(event.currentTarget).data(dataKey,context)),context._activeTrigger.click=!context._activeTrigger.click,context._isWithActiveTrigger()?context._enter(null,context):context._leave(null,context)}else{if($(this.getTipElement()).hasClass(ClassName.IN))return void this._leave(null,this);this._enter(null,this)}}},{key:"dispose",value:function(){clearTimeout(this._timeout),this.cleanupTether(),$.removeData(this.element,this.constructor.DATA_KEY),$(this.element).off(this.constructor.EVENT_KEY),this.tip&&$(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._tether=null,this.element=null,this.config=null,this.tip=null}},{key:"show",value:function(){var _this=this,showEvent=$.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){$(this.element).trigger(showEvent);var isInTheDom=$.contains(this.element.ownerDocument.documentElement,this.element);if(showEvent.isDefaultPrevented()||!isInTheDom)return;var tip=this.getTipElement(),tipId=Util$2.getUID(this.constructor.NAME);tip.setAttribute("id",tipId),this.element.setAttribute("aria-describedby",tipId),this.setContent(),this.config.animation&&$(tip).addClass(ClassName.FADE);var placement="function"==typeof this.config.placement?this.config.placement.call(this,tip,this.element):this.config.placement,attachment=this._getAttachment(placement);$(tip).data(this.constructor.DATA_KEY,this).appendTo(document.body),$(this.element).trigger(this.constructor.Event.INSERTED),this._tether=new Tether({attachment:attachment,element:tip,target:this.element,classes:TetherClass,classPrefix:CLASS_PREFIX,offset:this.config.offset,constraints:this.config.constraints,addTargetClasses:!1}),Util$2.reflow(tip),this._tether.position(),$(tip).addClass(ClassName.IN);var complete=function(){var prevHoverState=_this._hoverState;_this._hoverState=null,$(_this.element).trigger(_this.constructor.Event.SHOWN),prevHoverState===HoverState.OUT&&_this._leave(null,_this)};if(Util$2.supportsTransitionEnd()&&$(this.tip).hasClass(ClassName.FADE))return void $(this.tip).one(Util$2.TRANSITION_END,complete).emulateTransitionEnd(Tooltip._TRANSITION_DURATION);complete()}}},{key:"hide",value:function(callback){var _this2=this,tip=this.getTipElement(),hideEvent=$.Event(this.constructor.Event.HIDE),complete=function(){_this2._hoverState!==HoverState.IN&&tip.parentNode&&tip.parentNode.removeChild(tip),_this2.element.removeAttribute("aria-describedby"),$(_this2.element).trigger(_this2.constructor.Event.HIDDEN),_this2.cleanupTether(),callback&&callback()};$(this.element).trigger(hideEvent),hideEvent.isDefaultPrevented()||($(tip).removeClass(ClassName.IN),Util$2.supportsTransitionEnd()&&$(this.tip).hasClass(ClassName.FADE)?$(tip).one(Util$2.TRANSITION_END,complete).emulateTransitionEnd(TRANSITION_DURATION):complete(),this._hoverState="")}},{key:"isWithContent",value:function(){return Boolean(this.getTitle())}},{key:"getTipElement",value:function(){return this.tip=this.tip||$(this.config.template)[0]}},{key:"setContent",value:function(){var $tip=$(this.getTipElement());this.setElementContent($tip.find(Selector.TOOLTIP_INNER),this.getTitle()),$tip.removeClass(ClassName.FADE).removeClass(ClassName.IN),this.cleanupTether()}},{key:"setElementContent",value:function($element,content){var html=this.config.html;"object"===("undefined"==typeof content?"undefined":_typeof$4(content))&&(content.nodeType||content.jquery)?html?$(content).parent().is($element)||$element.empty().append(content):$element.text($(content).text()):$element[html?"html":"text"](content)}},{key:"getTitle",value:function(){var title=this.element.getAttribute("data-original-title");return title||(title="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),title}},{key:"cleanupTether",value:function(){this._tether&&this._tether.destroy()}},{key:"_getAttachment",value:function(placement){return AttachmentMap[placement.toUpperCase()]}},{key:"_setListeners",value:function(){var _this3=this,triggers=this.config.trigger.split(" ");triggers.forEach(function(trigger){if("click"===trigger)$(_this3.element).on(_this3.constructor.Event.CLICK,_this3.config.selector,$.proxy(_this3.toggle,_this3));else if(trigger!==Trigger.MANUAL){var eventIn=trigger===Trigger.HOVER?_this3.constructor.Event.MOUSEENTER:_this3.constructor.Event.FOCUSIN,eventOut=trigger===Trigger.HOVER?_this3.constructor.Event.MOUSELEAVE:_this3.constructor.Event.FOCUSOUT;$(_this3.element).on(eventIn,_this3.config.selector,$.proxy(_this3._enter,_this3)).on(eventOut,_this3.config.selector,$.proxy(_this3._leave,_this3))}}),this.config.selector?this.config=$.extend({},this.config,{trigger:"manual",selector:""}):this._fixTitle()}},{key:"_fixTitle",value:function(){var titleType=_typeof$4(this.element.getAttribute("data-original-title"));(this.element.getAttribute("title")||"string"!==titleType)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))}},{key:"_enter",value:function(event,context){var dataKey=this.constructor.DATA_KEY;return context=context||$(event.currentTarget).data(dataKey),context||(context=new this.constructor(event.currentTarget,this._getDelegateConfig()),$(event.currentTarget).data(dataKey,context)),event&&(context._activeTrigger["focusin"===event.type?Trigger.FOCUS:Trigger.HOVER]=!0),$(context.getTipElement()).hasClass(ClassName.IN)||context._hoverState===HoverState.IN?void(context._hoverState=HoverState.IN):(clearTimeout(context._timeout),context._hoverState=HoverState.IN,context.config.delay&&context.config.delay.show?void(context._timeout=setTimeout(function(){context._hoverState===HoverState.IN&&context.show()},context.config.delay.show)):void context.show())}},{key:"_leave",value:function(event,context){var dataKey=this.constructor.DATA_KEY;if(context=context||$(event.currentTarget).data(dataKey),context||(context=new this.constructor(event.currentTarget,this._getDelegateConfig()),$(event.currentTarget).data(dataKey,context)),event&&(context._activeTrigger["focusout"===event.type?Trigger.FOCUS:Trigger.HOVER]=!1),!context._isWithActiveTrigger())return clearTimeout(context._timeout),context._hoverState=HoverState.OUT,context.config.delay&&context.config.delay.hide?void(context._timeout=setTimeout(function(){context._hoverState===HoverState.OUT&&context.hide()},context.config.delay.hide)):void context.hide()}},{key:"_isWithActiveTrigger",value:function(){for(var trigger in this._activeTrigger)if(this._activeTrigger[trigger])return!0;return!1}},{key:"_getConfig",value:function(config){return config=$.extend({},this.constructor.Default,$(this.element).data(),config),config.delay&&"number"==typeof config.delay&&(config.delay={show:config.delay,hide:config.delay}),Util$2.typeCheckConfig(NAME,config,this.constructor.DefaultType),config}},{key:"_getDelegateConfig",value:function(){var config={};if(this.config)for(var key in this.config)this.constructor.Default[key]!==this.config[key]&&(config[key]=this.config[key]);return config}}],[{key:"_jQueryInterface",value:function(config){return this.each(function(){var data=$(this).data(DATA_KEY),_config="object"===("undefined"==typeof config?"undefined":_typeof$4(config))?config:null;if((data||!/dispose|hide/.test(config))&&(data||(data=new Tooltip(this,_config),$(this).data(DATA_KEY,data)),"string"==typeof config)){if(void 0===data[config])throw new Error('No method named "'+config+'"');data[config]()}})}},{key:"VERSION",get:function(){return VERSION}},{key:"Default",get:function(){return Default}},{key:"NAME",get:function(){return NAME}},{key:"DATA_KEY",get:function(){return DATA_KEY}},{key:"Event",get:function(){return Event}},{key:"EVENT_KEY",get:function(){return EVENT_KEY}},{key:"DefaultType",get:function(){return DefaultType}}]),Tooltip}();return $.fn[NAME]=Tooltip._jQueryInterface,$.fn[NAME].Constructor=Tooltip,$.fn[NAME].noConflict=function(){return $.fn[NAME]=JQUERY_NO_CONFLICT,Tooltip._jQueryInterface},Tooltip}(jQuery),_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass$22=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Popover$2=function($){var NAME="popover",VERSION="4.0.0-alpha.5",DATA_KEY="bs.popover",EVENT_KEY="."+DATA_KEY,JQUERY_NO_CONFLICT=$.fn[NAME],Default=$.extend({},Tooltip.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),DefaultType=$.extend({},Tooltip.DefaultType,{content:"(string|element|function)"}),ClassName={FADE:"fade",IN:"in"},Selector={TITLE:".popover-title",CONTENT:".popover-content"},Event={HIDE:"hide"+EVENT_KEY,HIDDEN:"hidden"+EVENT_KEY,SHOW:"show"+EVENT_KEY,SHOWN:"shown"+EVENT_KEY,INSERTED:"inserted"+EVENT_KEY,CLICK:"click"+EVENT_KEY,FOCUSIN:"focusin"+EVENT_KEY,FOCUSOUT:"focusout"+EVENT_KEY,MOUSEENTER:"mouseenter"+EVENT_KEY,MOUSELEAVE:"mouseleave"+EVENT_KEY},Popover=function(_Tooltip){function Popover(){return _classCallCheck$22(this,Popover),_possibleConstructorReturn$20(this,(Popover.__proto__||Object.getPrototypeOf(Popover)).apply(this,arguments))}return _inherits$20(Popover,_Tooltip),_createClass$22(Popover,[{key:"isWithContent",value:function(){return this.getTitle()||this._getContent()}},{key:"getTipElement",value:function(){return this.tip=this.tip||$(this.config.template)[0]}},{key:"setContent",value:function(){var $tip=$(this.getTipElement());this.setElementContent($tip.find(Selector.TITLE),this.getTitle()),this.setElementContent($tip.find(Selector.CONTENT),this._getContent()),$tip.removeClass(ClassName.FADE).removeClass(ClassName.IN),this.cleanupTether()}},{key:"_getContent",value:function(){return this.element.getAttribute("data-content")||("function"==typeof this.config.content?this.config.content.call(this.element):this.config.content)}}],[{key:"_jQueryInterface",value:function(config){return this.each(function(){var data=$(this).data(DATA_KEY),_config="object"===("undefined"==typeof config?"undefined":_typeof$3(config))?config:null;if((data||!/destroy|hide/.test(config))&&(data||(data=new Popover(this,_config),$(this).data(DATA_KEY,data)),"string"==typeof config)){if(void 0===data[config])throw new Error('No method named "'+config+'"');data[config]()}})}},{key:"VERSION",get:function(){return VERSION}},{key:"Default",get:function(){return Default}},{key:"NAME",get:function(){return NAME}},{key:"DATA_KEY",get:function(){return DATA_KEY}},{key:"Event",get:function(){return Event}},{key:"EVENT_KEY",get:function(){return EVENT_KEY}},{key:"DefaultType",get:function(){return DefaultType}}]),Popover}(Tooltip);return $.fn[NAME]=Popover._jQueryInterface,$.fn[NAME].Constructor=Popover,$.fn[NAME].noConflict=function(){return $.fn[NAME]=JQUERY_NO_CONFLICT,Popover._jQueryInterface},Popover}(jQuery),Popover=function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},options={el:"",selector:!1,title:"",content:"",animation:!0,container:!1,delay:0,html:!1,showNow:!1,placement:"bottom",template:'<div class="popover"><div class="popover-arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',eventName:"click",constraints:[],offset:"0 0",onClose:function(){}};Object.assign(options,opts);var el=options.el instanceof $?options.el:$(options.el),_eventName="click.popover",isOpen=!!el.attr("data-isopen"),bodyEl=$("body, .modal-body");return el.length&&(options.showNow&&el.popover("dispose"),el.popover({selector:options.selector,title:options.title,content:options.content,animation:options.animation,container:options.container,delay:options.delay,html:!!options.html,placement:options.placement,template:options.template,constraints:options.constraints,trigger:options.eventName,offset:options.offset}),el.on("hidden.bs.popover",function(){"function"==typeof options.onClose&&options.onClose(event)}),options.showNow&&(bodyEl.trigger("click",el),bodyEl.off(_eventName).on(_eventName,function(event,data){data!==el[0]&&(el.popover("hide"),el.attr("data-isopen",""))}),el.on("shown.bs.popover",function(){$(".popover").off("click").on("click",function(event){event.stopPropagation()})}),isOpen?el.attr("data-isopen",""):(el.popover("show"),el.attr("data-isopen","true")))),el},fun$1=function(opts){return Popover(opts)};Lego.components("popover",fun$1);var _createClass$24=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$19=_taggedTemplateLiteral$19(['\n        <div class="progress">\n            ','\n            <progress class="progress progress-','" value="','" max="100"></progress>\n        </div>\n        '],['\n        <div class="progress">\n            ','\n            <progress class="progress progress-','" value="','" max="100"></progress>\n        </div>\n        ']),_templateObject2$18=_taggedTemplateLiteral$19(['<div class="text-xs-center">',"</div>"],['<div class="text-xs-center">',"</div>"]),Progressbar=function(_Lego$UI$Baseview){function Progressbar(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$24(this,Progressbar);var options={status:"",showInfo:!0,percent:0,strokeWidth:6,onComplete:function(){}};return Object.assign(options,opts),_possibleConstructorReturn$21(this,(Progressbar.__proto__||Object.getPrototypeOf(Progressbar)).call(this,options))}return _inherits$21(Progressbar,_Lego$UI$Baseview),_createClass$24(Progressbar,[{key:"render",value:function(){var options=this.options||{};100==options.percent&&"function"==typeof options.onComplete&&options.onComplete(this);var vDom=hx(_templateObject$19,options.showInfo?hx(_templateObject2$18,this.format(options.percent)):"",options.status?options.status:"primary",options.percent);return vDom}},{key:"format",value:function(percent){return"function"==typeof this.options.format?this.options.format(percent):percent+"%"}}]),Progressbar}(Lego.UI.Baseview);Lego.components("progressbar",Progressbar);var _createClass$25=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$20=_taggedTemplateLiteral$20(['\n        <ul class="lego-pagination '," ",'">\n            <li class="prev ','">\n                <a href="javascript:void(0)" title="上一页"><i class="anticon anticon-left"></i></a>\n            </li>\n            ',"\n            ","\n            ","\n            ","\n            ","\n            ","\n            ","\n        </ul>\n        "],['\n        <ul class="lego-pagination '," ",'">\n            <li class="prev ','">\n                <a href="javascript:void(0)" title="上一页"><i class="anticon anticon-left"></i></a>\n            </li>\n            ',"\n            ","\n            ","\n            ","\n            ","\n            ","\n            ","\n        </ul>\n        "]),_templateObject2$19=_taggedTemplateLiteral$20(['\n            <div title="',"/",'" class="lego-pagination-simple-pager">\n                <input type="text" value="','"><span class="lego-pagination-slash">／</span>\n            </div>\n            '],['\n            <div title="',"/",'" class="lego-pagination-simple-pager">\n                <input type="text" value="','"><span class="lego-pagination-slash">／</span>\n            </div>\n            ']),_templateObject3$12=_taggedTemplateLiteral$20(['\n            <li title="','" class="page page-item ','"><a href="javascript:void(0)">',"</a></li>\n            "],['\n            <li title="','" class="page page-item ','"><a href="javascript:void(0)">',"</a></li>\n            "]),_templateObject4$7=_taggedTemplateLiteral$20(['\n            <li title="下 ',' 页" class="page morepage"><a href="javascript:void(0)"><i class="anticon anticon-ellipsis"></a></i></li>\n            '],['\n            <li title="下 ',' 页" class="page morepage"><a href="javascript:void(0)"><i class="anticon anticon-ellipsis"></a></i></li>\n            ']),_templateObject5$5=_taggedTemplateLiteral$20(['<li title="','" class="page page-item"><a href="javascript:void(0)">',"</a></li>"],['<li title="','" class="page page-item"><a href="javascript:void(0)">',"</a></li>"]),_templateObject6$2=_taggedTemplateLiteral$20(['\n            <li class="next ','">\n                <a href="javascript:void(0)" title="下一页"><i class="anticon anticon-right"></i></a>\n            </li>\n            '],['\n            <li class="next ','">\n                <a href="javascript:void(0)" title="下一页"><i class="anticon anticon-right"></i></a>\n            </li>\n            ']),_templateObject7$2=_taggedTemplateLiteral$20(['\n            <li class="pageSize">\n                <span class="info" id="select-','">\n                    <button class="btn dropdown-toggle" type="button" style="padding: 3px 10px;">',' / 页 </button>\n                    <dropdown id="dropdown-','"></dropdown>\n                </span>\n            </li>\n            '],['\n            <li class="pageSize">\n                <span class="info" id="select-','">\n                    <button class="btn dropdown-toggle" type="button" style="padding: 3px 10px;">',' / 页 </button>\n                    <dropdown id="dropdown-','"></dropdown>\n                </span>\n            </li>\n            ']),_templateObject8$2=_taggedTemplateLiteral$20(['\n            <li><span class="info">\n                    跳转至\n                    <input type="text" class="form-control pageJump" value="','">\n                </span>\n                ',"\n            </li>\n            "],['\n            <li><span class="info">\n                    跳转至\n                    <input type="text" class="form-control pageJump" value="','">\n                </span>\n                ',"\n            </li>\n            "]),_templateObject9$1=_taggedTemplateLiteral$20(['\n                <span class="info">\n                ',"\n                </span>\n                "],['\n                <span class="info">\n                ',"\n                </span>\n                "]),Pagination=function(_Lego$UI$Baseview){function Pagination(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$25(this,Pagination);var options={events:{"click .prev:not(.disabled)":"clickPrevPage","click .page-item":"clickItemPage","click .next:not(.disabled)":"clickNextPage","click .morepage":"clickMorePage",'keydown .info>input[type="text"]':"_enterSearch"},current:1,totalCount:0,totalPages:0,pageSize:10,pageRang:10,onChange:function(){},showSizeChanger:!0,pageSizeOptions:[10,20,30,40,50],onPageSizeChange:function(){},showQuickJumper:!0,size:"",simple:null,isShowTotal:!0,data:{},components:[]};Object.assign(options,opts);var _this=_possibleConstructorReturn$22(this,(Pagination.__proto__||Object.getPrototypeOf(Pagination)).call(this,options));return _this.jumped=!1,_this}return _inherits$22(Pagination,_Lego$UI$Baseview),_createClass$25(Pagination,[{key:"components",value:function(){var options=this.options,that=this;if(!options.simple&&options.showSizeChanger){var theData=options.pageSizeOptions.map(function(val){return{key:val,value:val+" / 页"}});this.addCom({el:"#dropdown-"+options.vid,container:"#select-"+options.vid,direction:"top",data:theData,onChange:function(self,result){var num=parseInt(result.key);this.context.options.current=1,this.context.options.pageSize=num,this.context.options.onPageSizeChange(that,num)}})}}},{key:"render",value:function(){var options=this.options,current=parseInt(options.current);options.pageSize=options.pageSize;var pageRang=parseInt(options.pageRang),totalCount=options.data.totalCount||("function"==typeof options.totalCount?options.totalCount():options.totalCount);options.totalPages=options.data.totalPages||Math.ceil(totalCount/options.pageSize),pageRang=pageRang>=options.totalPages?options.totalPages:pageRang;var baseTimes=pageRang?Math.floor((current-1)/pageRang):0,startPage=baseTimes*pageRang+1,endPage=startPage+pageRang-1,showEllipsis=!(Math.ceil(current/pageRang)===Math.ceil(options.totalPages/pageRang)||!totalCount),pagesArr=[];
endPage=endPage>=options.totalPages?options.totalPages:endPage;for(var i=startPage;i<=endPage;i++)pagesArr.push(i);var vDom=hx(_templateObject$20,options.simple?"pagination-simple":"","small"==options.size?"mini":"",current<=1?"disabled":"",options.simple?hx(_templateObject2$19,current,options.endPage,current):"",options.simple?"":pagesArr.map(function(x){return hx(_templateObject3$12,x,x==current?"active":"",x)}),showEllipsis?hx(_templateObject4$7,options.pageSize):"",!options.simple&&showEllipsis?hx(_templateObject5$5,options.totalPages,options.totalPages):"",options.simple?"":hx(_templateObject6$2,current>=options.totalPages?"disabled":""),!options.simple&&options.showSizeChanger?hx(_templateObject7$2,options.vid,options.pageSize,options.vid):"",!options.simple&&options.showQuickJumper?hx(_templateObject8$2,this.jumped?current:"1",options.isShowTotal?hx(_templateObject9$1,"function"==typeof options.showTotal?options.showTotal(totalCount):"总数 "+totalCount):""):"");return this.jumped=!1,vDom}},{key:"clickPrevPage",value:function(event){event.stopPropagation();var options=this.options;debug.warn("点击了上一页"),options.current--,options.onChange(this,options.current,options.pageSize)}},{key:"clickItemPage",value:function(event){event.stopPropagation();var target=$(event.currentTarget),num=target.attr("title"),options=this.options;debug.warn("点击了第"+num+"页"),options.current=num,options.onChange(this,num,options.pageSize)}},{key:"clickNextPage",value:function(event){event.stopPropagation();var options=this.options;debug.warn("点击了下一页"),options.current++,options.onChange(this,options.current,options.pageSize)}},{key:"clickMorePage",value:function(event){event.stopPropagation();var options=this.options,current=parseInt(options.current),pageRang=parseInt(options.pageRang),currentMod=current%pageRang?current%pageRang:pageRang;debug.warn("点击了更多页"),options.current=current+(pageRang-currentMod+1),options.current>options.totalPages&&(options.current=options.totalPages),options.onChange(this,options.current,options.pageSize)}},{key:"_enterSearch",value:function(event){var target=$(event.currentTarget),options=this.options,num=target.val();13==event.keyCode&&(num>options.totalPages&&(num=options.totalPages),Number(num)||(num=1),this.jumped=!0,options.current=num,options.onChange(this,num,options.pageSize))}}]),Pagination}(Lego.UI.Baseview);Lego.components("pagination",Pagination);var _typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass$26=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Permis=function(){function Permis(){_classCallCheck$26(this,Permis),this.options={userId:0,operateHash:{},manageHash:{},users:{},isSuper:null,message:function(msg){Lego.UI.Util.message("error",msg)}}}return _createClass$26(Permis,[{key:"init",value:function(){var _this=this,opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};opts.operateHash&&(opts.operateHash="function"==typeof opts.operateHash?opts.operateHash():opts.operateHash),opts.manageHash&&(opts.manageHash="function"==typeof opts.manageHash?opts.manageHash():opts.manageHash),opts.users&&(opts.users="function"==typeof opts.users?opts.users():opts.users),Object.assign(this.options,opts),Array.isArray(this.options.users)&&!function(){var usersObj={};_this.options.users.forEach(function(user,index){usersObj[user.id]=user}),_this.options.users=usersObj}()}},{key:"check",value:function(module,operate,userId){var user_id=this.options.userId,operateHash=this.options.operateHash,manageHash=this.options.manageHash,users=this.options.users;if(this.options.isSuper)return!0;if(userId&&userId!==user_id){var theDepartment=void 0,result=users[userId];return result&&(theDepartment=result.deptId),!theDepartment||!manageHash[theDepartment]||(manageHash[theDepartment][module]?manageHash[theDepartment][module][operate]:manageHash[theDepartment][module+":"+operate])}return!module||!!operateHash[module]&&operateHash[module][operate]}}]),Permis}(),permisObj=new Permis;$.fn.extend({on:function(types,selector,data,fn){return _on(this,types,selector,data,fn)}}),Lego.components("permis",permisObj);var _createClass$30=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),UploadView=function(_Lego$View){function UploadView(){function createXMLHTTPRequest(){var xmlHttpRequest;if(window.XMLHttpRequest)xmlHttpRequest=new XMLHttpRequest,xmlHttpRequest.overrideMimeType&&xmlHttpRequest.overrideMimeType("text/xml");else if(window.ActiveXObject)for(var activexName=["MSXML2.XMLHTTP","Microsoft.XMLHTTP"],i=0;i<activexName.length;i++)try{if(xmlHttpRequest=new ActiveXObject(activexName[i]))break}catch(e){}return xmlHttpRequest}var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$30(this,UploadView);var options={uploadUri:"",downloadUri:Lego.config.downloadUri||"",percent:0,isAuto:!0,file:null,headers:{},params:{},onBegin:function(){},onProgress:function(){},onComplete:function(){},onFail:function(){},onCancel:function(){},needToken:!1};Object.assign(options,opts);var _this=_possibleConstructorReturn$26(this,(UploadView.__proto__||Object.getPrototypeOf(UploadView)).call(this,options));return _this.xhr=createXMLHTTPRequest(),_this.startDate=0,_this.form=null,0==_this.options.percent&&(_this.options.needToken&&_this.options.params.token||!_this.options.needToken)&&(_this.uploadInit(),_this.options.isAuto&&_this.start()),_this}return _inherits$26(UploadView,_Lego$View),_createClass$30(UploadView,[{key:"uploadInit",value:function(){var _this2=this,taking=0,file=this.options.file,params=this.options.params;this.xhr.crossDomain=!0;var progressbar=Lego.getView("#progressbar_"+this.options.vid);if(this.form=new FormData,this.form.append("file",file),!Lego.isEmptyObject(params))for(var key in params)this.form.append(key,params[key]);this.xhr.upload.addEventListener("progress",function(event){if(event.lengthComputable){var nowDate=(new Date).getTime();taking=nowDate-_this2.startDate;var x=event.loaded/1024,y=taking/1e3,uploadSpeed=x/y,formatSpeed=void 0;formatSpeed=uploadSpeed>1024?(uploadSpeed/1024).toFixed(2)+"Mb/s":uploadSpeed.toFixed(2)+"Kb/s";var percent=Math.round(100*event.loaded/event.total);progressbar&&(progressbar.options.percent=percent)}"function"==typeof _this2.options.onProgress&&_this2.options.onProgress(_this2)},!1),this.xhr.addEventListener("loadstart",function(event){"function"==typeof _this2.options.onBegin&&_this2.options.onBegin(file,_this2)},!1),this.xhr.addEventListener("load",function(event){if(4==_this2.xhr.readyState&&200==_this2.xhr.status&&""!=_this2.xhr.responseText){var resp=JSON.parse(_this2.xhr.response);resp._id=file._id,_this2.options.percent=100,"function"==typeof _this2.options.onComplete&&_this2.options.onComplete(_this2,resp)}else if(200!=_this2.xhr.status&&_this2.xhr.responseText){var errorMsg={status:"error",data:"Unknown error occurred: ["+_this2.xhr.responseText+"]"};"function"==typeof _this2.options.onFail&&_this2.options.onFail(_this2,errorMsg)}},!1),this.xhr.addEventListener("error",function(event){debug.error("上传失败"),"function"==typeof _this2.options.onFail&&_this2.options.onFail(_this2,event),_this2.remove()},!1),this.xhr.addEventListener("abort",function(event){debug.error("取消上传"),"function"==typeof _this2.options.onCancel&&_this2.options.onCancel(_this2,event),_this2.remove()},!1),this.xhr.open("POST",this.options.uploadUri,!0);for(var _key in this.options.headers)this.xhr.setRequestHeader(_key,this.options.headers[_key])}},{key:"cancel",value:function(){this.xhr.abort()}},{key:"start",value:function(){this.startDate=(new Date).getTime(),this.xhr.send(this.form)}}]),UploadView}(Lego.View),_createClass$29=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$23=_taggedTemplateLiteral$23(['\n        <div class="media lego-upload-item">\n            <div class="media-left">\n                <i class="','"></i>\n            </div>\n            ',"\n        </div>\n        "],['\n        <div class="media lego-upload-item">\n            <div class="media-left">\n                <i class="','"></i>\n            </div>\n            ',"\n        </div>\n        "]),_templateObject2$22=_taggedTemplateLiteral$23(['\n            <div class="media-body">\n                <h4 class="media-heading">\n                    <div class="right">\n                        <a href="javascript:;" class="lego-cancelbtn" id="','" onclick=','>\n                            <i class="anticon anticon-close-circle float-xs-right"></i>\n                        </a>\n                    </div>\n                    ','\n                </h4>\n                <progressbar id="','"></progressbar>\n            </div>'],['\n            <div class="media-body">\n                <h4 class="media-heading">\n                    <div class="right">\n                        <a href="javascript:;" class="lego-cancelbtn" id="','" onclick=','>\n                            <i class="anticon anticon-close-circle float-xs-right"></i>\n                        </a>\n                    </div>\n                    ','\n                </h4>\n                <progressbar id="','"></progressbar>\n            </div>']),_templateObject3$15=_taggedTemplateLiteral$23(['\n            <div class="media-body">\n                <h4 class="media-heading">\n                    ',"\n                    ","\n                </h4>\n                <small>\n                    <cite>",'</cite>\n                    <time>\n                        <a href="',"?attname=",'" target="_blank">下载</a>\n                        <a href="#" style="display:none">预览</a>\n                    </time>\n                </small>\n            </div>\n            '],['\n            <div class="media-body">\n                <h4 class="media-heading">\n                    ',"\n                    ","\n                </h4>\n                <small>\n                    <cite>",'</cite>\n                    <time>\n                        <a href="',"?attname=",'" target="_blank">下载</a>\n                        <a href="#" style="display:none">预览</a>\n                    </time>\n                </small>\n            </div>\n            ']),_templateObject4$10=_taggedTemplateLiteral$23(['\n                    <div class="right">\n                        <a href="javascript:;" class="lego-closebtn" id="','" onclick=','>\n                            <i class="anticon anticon-close-circle float-xs-right"></i>\n                        </a>\n                    </div>\n                    '],['\n                    <div class="right">\n                        <a href="javascript:;" class="lego-closebtn" id="','" onclick=','>\n                            <i class="anticon anticon-close-circle float-xs-right"></i>\n                        </a>\n                    </div>\n                    ']),_templateObject5$8=_taggedTemplateLiteral$23(['\n            <div class="lego-upload-photo-item preview-','" style="background-image:url(',');">\n                <div class="lego-upload-operate">\n                    <progressbar id="','"></progressbar>\n                    <a href="javascript:;" class="lego-cancelbtn" id="','" onclick=',' title="取消">\n                        <i class="anticon anticon-close-circle"></i>\n                    </a>\n                </div>\n            </div>\n            '],['\n            <div class="lego-upload-photo-item preview-','" style="background-image:url(',');">\n                <div class="lego-upload-operate">\n                    <progressbar id="','"></progressbar>\n                    <a href="javascript:;" class="lego-cancelbtn" id="','" onclick=',' title="取消">\n                        <i class="anticon anticon-close-circle"></i>\n                    </a>\n                </div>\n            </div>\n            ']),_templateObject6$3=_taggedTemplateLiteral$23(['\n            <div class="lego-upload-photo-item preview-','" style="background-image:url(',');">\n                <div class="lego-upload-operate">\n                    <div class="lego-upload-btns">\n                        ',"\n                        ","\n                    </div>\n                </div>\n            </div>\n            "],['\n            <div class="lego-upload-photo-item preview-','" style="background-image:url(',');">\n                <div class="lego-upload-operate">\n                    <div class="lego-upload-btns">\n                        ',"\n                        ","\n                    </div>\n                </div>\n            </div>\n            "]),_templateObject7$3=_taggedTemplateLiteral$23(['\n                        <a href="javascript:;" class="lego-previewbtn" id="p_','" title="预览">\n                            <i class="anticon anticon-eye-o"></i>\n                        </a>'],['\n                        <a href="javascript:;" class="lego-previewbtn" id="p_','" title="预览">\n                            <i class="anticon anticon-eye-o"></i>\n                        </a>']),_templateObject8$3=_taggedTemplateLiteral$23(['\n                        <a href="javascript:;" class="lego-closebtn" id="','" onclick=',' title="删除">\n                            <i class="anticon anticon-delete"></i>\n                        </a>'],['\n                        <a href="javascript:;" class="lego-closebtn" id="','" onclick=',' title="删除">\n                            <i class="anticon anticon-delete"></i>\n                        </a>']),UploadItem=function(_UploadBase){function UploadItem(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$29(this,UploadItem);var options={uploadUri:"",percent:0,isAuto:!0,readonly:!1,showZoom:!0,file:{},type:"file",headers:{},params:{},onBegin:function(){},onProgress:function(){},onComplete:function(){},onFail:function(){},onCancel:function(){},onRemove:function(){},components:[]};return Object.assign(options,opts),_possibleConstructorReturn$25(this,(UploadItem.__proto__||Object.getPrototypeOf(UploadItem)).call(this,options))}return _inherits$25(UploadItem,_UploadBase),_createClass$29(UploadItem,[{key:"components",value:function(){var options=this.options;this.addCom({el:"#progressbar_"+options.vid,showInfo:!1,status:"success",onComplete:function(self){self.options.percent=100}})}},{key:"renderFile",value:function(){var opts=this.options,vDom=hx(_templateObject$23,Lego.UI.Util.getFileIcon(opts.file.name),opts.percent<100?hx(_templateObject2$22,val(opts.file._id),this.onCancel.bind(this),val(opts.file.name),"progressbar_"+opts.vid):hx(_templateObject3$15,opts.readonly||100!=opts.percent?"":hx(_templateObject4$10,val(opts.file._id),this.onRemove.bind(this)),val(opts.file.name),Lego.UI.Util.convertByteUnit(opts.file.size),val(opts.file.url),val(opts.file.name)));return vDom}},{key:"renderPhoto",value:function(){var opts=this.options,vDom=opts.percent<100?hx(_templateObject5$8,val(opts.type),val(opts.previewImgSrc),"progressbar_"+opts.vid,val(opts.file._id),this.onCancel.bind(this)):hx(_templateObject6$3,val(opts.type),val(opts.file.url),opts.showZoom?hx(_templateObject7$3,val(opts.file._id)):"",opts.readonly||100!=opts.percent?"":hx(_templateObject8$3,val(opts.file._id),this.onRemove.bind(this)));return vDom}},{key:"render",value:function(){var opts=this.options;switch(opts.type){case"file":return this.renderFile();case"photos":return this.renderPhoto();case"avatar":return this.renderPhoto();default:return this.renderFile()}}},{key:"removeFun",value:function(){var _this2=this;"avatar"!==this.options.type&&("photos"==this.options.type?this.$el.remove():this.$el.slideUp("normal",function(){_this2.$el.remove()}))}},{key:"onCancel",value:function(event){event.stopPropagation();var target=$(event.target),_id=target.parent().attr("id");this.cancel(),"function"==typeof this.options.onCancel&&this.options.onCancel("cancel",_id),this.removeFun()}},{key:"onRemove",value:function(event){event.stopPropagation();var target=$(event.target),_id=target.parent().attr("id");"function"==typeof this.options.onRemove&&this.options.onRemove("remove",_id),this.removeFun()}}]),UploadItem}(UploadView),_typeof$7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass$28=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$22=_taggedTemplateLiteral$22(['\n        <div class="lego-upload lego-upload-','">\n            <style>\n                .lego-upload .preview-',"{","","}\n            </style>\n            ",'\n            <input type="hidden" value="','" name="','" class="lego-upload-value">\n            <input multiple="multiple" type="file" class="form-control lego-fileInput hide" accept="','" style="display:none">\n            ',"\n            ","\n        </div>\n        "],['\n        <div class="lego-upload lego-upload-','">\n            <style>\n                .lego-upload .preview-',"{","","}\n            </style>\n            ",'\n            <input type="hidden" value="','" name="','" class="lego-upload-value">\n            <input multiple="multiple" type="file" class="form-control lego-fileInput hide" accept="','" style="display:none">\n            ',"\n            ","\n        </div>\n        "]),_templateObject2$21=_taggedTemplateLiteral$22(['\n            <button class="btn btn-secondary lego-addbtn" type="button" ',">\n                ","\n                ","\n            </button>\n            "],['\n            <button class="btn btn-secondary lego-addbtn" type="button" ',">\n                ","\n                ","\n            </button>\n            "]),_templateObject3$14=_taggedTemplateLiteral$22(['<i class="anticon anticon-upload"></i>'],['<i class="anticon anticon-upload"></i>']),_templateObject4$9=_taggedTemplateLiteral$22(['<div class="lego-upload-container"></div>'],['<div class="lego-upload-container"></div>']),_templateObject5$7=_taggedTemplateLiteral$22(['\n                <div class="lego-upload-container" title="选择上传照片">\n                    <div class="lego-upload-add preview-','">\n                        <i class="anticon anticon-plus avatar-uploader-trigger preview-','"></i>\n                    </div>\n                </div>\n            '],['\n                <div class="lego-upload-container" title="选择上传照片">\n                    <div class="lego-upload-add preview-','">\n                        <i class="anticon anticon-plus avatar-uploader-trigger preview-','"></i>\n                    </div>\n                </div>\n            ']),Upload=function(_Lego$UI$Baseview){function Upload(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$28(this,Upload);var uploadUri="https:"===window.location.protocol?"https://up.qbox.me":"http://upload.qiniu.com",options={events:{"click .lego-addbtn, .lego-upload-add":"onClickAdd"},keyRoot:"",type:"file",buttonText:"添加附件",buttonIcon:"",showZoom:!0,name:"",token:"",params:{},uploadUri:Lego.config.uploadUri||uploadUri,saveUri:"",accept:[],acceptSuffix:[],previewImg:{width:0,height:0,quality:1},multiple:!0,context:null,template:"",maxFileSize:"5mb",maxFilesCount:9,isAuto:!0,readonly:!1,disabled:!1,hasCookie:!1,showUploadList:!0,value:[],onAddFile:function(){},onBegin:function(){},onProgress:function(){},onComplete:function(){},onFail:function(){},onRemove:function(){},onCancel:function(){}};if(Object.assign(options,opts),"avatar"==options.type&&(options.multiple=!1),"file"!==options.type){options.accept=options.accept||["image/gif","image/jpeg","image/png","image/jpg"];var cssOpts={width:options.previewImg.width||("avatar"==options.type?150:95),height:options.previewImg.height||("avatar"==options.type?150:95)};Object.assign(options.previewImg,cssOpts)}var _this=_possibleConstructorReturn$24(this,(Upload.__proto__||Object.getPrototypeOf(Upload)).call(this,options));return _this.$(".lego-fileInput").on("change",function(event){var target=$(event.currentTarget)[0];_this.uploadInit(target.files,target)}),_this.options.value.length&&_this.options.value.forEach(function(item,index){_this.showItem(item)}),_this}return _inherits$24(Upload,_Lego$UI$Baseview),_createClass$28(Upload,[{key:"components",value:function(){this.fileList=this.fileList||[];var opts=this.options;opts.value.length&&(opts.value=opts.value.map(function(file){var options={el:".lego-upload-container",readonly:opts.readonly,percent:100,showZoom:opts.showZoom,type:opts.type,file:file};return options}))}},{key:"render",value:function(){var opts=this.options,width=opts.previewImg.width,height=opts.previewImg.height;width&&(width="width:"+("string"==typeof width?width:width+"px")+";"),height&&(height="height:"+("string"==typeof height?height:height+"px")+";");var vDom=hx(_templateObject$22,val(opts.type),val(opts.type),width?width:"",height?height:"",opts.readonly||"file"!=opts.type?"":hx(_templateObject2$21,opts.disabled?"disabled":"",opts.buttonIcon?opts.buttonIcon:hx(_templateObject3$14),val(opts.buttonText)),this.getValue().join(","),val(opts.name),val(opts.accept.join(",")),opts.showUploadList&&"file"==opts.type?hx(_templateObject4$9):"","file"!==opts.type?hx(_templateObject5$7,val(opts.type),val(opts.type)):"");return opts.template?opts.template:vDom}},{key:"uploadInit",value:function(files,fileInput){var _this2=this,uploadFiles=[];uploadFiles="object"==("undefined"==typeof files?"undefined":_typeof$7(files))&&files[0]?Array.prototype.slice.call(files,0):[files],fileInput&&(fileInput.value="");var that=this,opts=this.options,filesCount=uploadFiles.length,maxFilesCount=opts.maxFilesCount;if(filesCount){if(filesCount>maxFilesCount)return void Lego.UI.message("warning","只能上传"+maxFilesCount+"个文件");if(uploadFiles=uploadFiles.filter(function(file){file._id=[file.name,file.size,file.lastModified].join("_");var hasFile=_this2.fileList.includes(file._id);return hasFile||_this2.fileList.push(file._id),!hasFile}),this.fileList.length>maxFilesCount)return Lego.UI.message("warning","只能上传"+maxFilesCount+"个文件"),this.fileList.length=maxFilesCount,void(uploadFiles.length>maxFilesCount&&(uploadFiles.length=maxFilesCount));"function"==typeof opts.onAddFile&&opts.onAddFile(this.fileList,uploadFiles),uploadFiles.forEach(function(file,i){if(opts.accept.length&&!opts.accept.includes(file.type))return Lego.UI.message("error","上传文件格式不正确"),void(_this2.fileList=_this2.fileList.filter(function(item){return item._id!==file._id}));if(opts.acceptSuffix.length&&!opts.acceptSuffix.includes(Lego.UI.Util.getExtName(file.name)))return Lego.UI.message("error","上传文件格式不正确"),void(_this2.fileList=_this2.fileList.filter(function(item){return item._id!==file._id}));if(Math.ceil(file.size/1048576)>parseInt(opts.maxFileSize)){var msg="发送文件最大为"+opts.maxFileSize;return 1==uploadFiles.length?Lego.UI.message("error",msg):debug.warn(msg),void(_this2.fileList=_this2.fileList.filter(function(item){return item._id!==file._id}))}if(!(i>maxFilesCount-1)){var uploadOption={el:".lego-upload-container",uploadUri:opts.uploadUri,readonly:opts.readonly,isAuto:opts.isAuto,file:file,type:opts.type,percent:0,showZoom:opts.showZoom,params:Object.assign({key:opts.key||that.getKey(file.name),token:"string"==typeof opts.data?opts.data:""},opts.params||{}),needToken:!0,onBegin:opts.onBegin,onProgress:opts.onProgress,onComplete:function(self,resp){var hasFile=opts.value.find(function(item){return item.file.hash==resp.hash});!hasFile&&opts.value.length<=maxFilesCount&&(resp.url=Lego.config.downloadUri+resp.key,self.options.file=resp,opts.value.push({file:resp,type:opts.type,percent:100})),"function"==typeof opts.onComplete&&opts.onComplete(that,self,resp)},onFail:opts.onFail,onCancel:opts.onCancel};"file"!==opts.type?(uploadOption.isAuto=opts.isAuto,opts.previewImg.success=function(results,option){option.previewImgSrc=results.blob,that.showItem(option)},localresizeimg(file,opts.previewImg,uploadOption)):that.showItem(uploadOption)}})}else debug&&debug.log("form input error")}},{key:"getKey",value:function(fileName){return this.options.keyRoot+Lego.UI.Util.uuid()+"."+Lego.UI.Util.getExtName(fileName)}},{key:"onClickAdd",value:function(event){this.$(".lego-fileInput").click()}},{key:"showItem",value:function(uploadOption){var _this3=this,opts=this.options,callback=function(type,_id){if(_this3.fileList=_this3.fileList.filter(function(value){return value!==_id}),"cancel"==type?"function"==typeof opts.onCancel&&opts.onCancel(_this3,_id):(opts.value=opts.value.filter(function(item){return item.file._id!==_id}),"function"==typeof opts.onRemove&&opts.onRemove(_this3,_id)),"avatar"==opts.type){var html=['<div class="lego-upload-add preview-'+val(opts.type)+'">','<i class="anticon anticon-plus avatar-uploader-trigger preview-'+val(opts.type)+'"></i></div>'].join("");_this3.$(".lego-upload-container").html(html)}_this3.refresh()};uploadOption.context=this,uploadOption.insert=opts.multiple?"photos"==opts.type?"prepend":"append":"html",uploadOption.onCancel=callback,uploadOption.onRemove=callback,Lego.create(UploadItem,uploadOption)}},{key:"getValue",value:function(){var result=[];if(this.options.value.length){var newArr=this.options.value.filter(function(item){return!!item.id});result=newArr.map(function(item){return item.id})}return result}},{key:"reset",value:function(){return this.fileList=[],this.options.value=[],this}}]),Upload}(Lego.UI.Baseview);Lego.components("upload",Upload);var _typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass$27=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$21=_taggedTemplateLiteral$21(['\n        <div class="lego-reply">\n            <textarea placeholder="','" class="form-control lego-reply-content" id="content-','"></textarea>\n            ','\n            <div class="lego-reply-toolbar">\n                ',"\n                ",'\n            </div>\n            <div class="popover popover-bottom" style="display:none;">\n                <div class="popover-arrow"></div><h3 class="popover-title">上传附件 <i class="anticon anticon-close" style="float:right"></i></h3>\n                <div class="popover-content"><upload id="upload-','"></upload></div>\n            </div>\n        </div>\n        '],['\n        <div class="lego-reply">\n            <textarea placeholder="','" class="form-control lego-reply-content" id="content-','"></textarea>\n            ','\n            <div class="lego-reply-toolbar">\n                ',"\n                ",'\n            </div>\n            <div class="popover popover-bottom" style="display:none;">\n                <div class="popover-arrow"></div><h3 class="popover-title">上传附件 <i class="anticon anticon-close" style="float:right"></i></h3>\n                <div class="popover-content"><upload id="upload-','"></upload></div>\n            </div>\n        </div>\n        ']),_templateObject2$20=_taggedTemplateLiteral$21(['\n            <dropdownbtn id="dropdownbtn-','"></dropdownbtn>\n            '],['\n            <dropdownbtn id="dropdownbtn-','"></dropdownbtn>\n            ']),_templateObject3$13=_taggedTemplateLiteral$21(['\n            <button type="button" class="btn btn-',' lego-reply-submit">',"</button>\n            "],['\n            <button type="button" class="btn btn-',' lego-reply-submit">',"</button>\n            "]),_templateObject4$8=_taggedTemplateLiteral$21(['<facial id="facial-','"></facial>'],['<facial id="facial-','"></facial>']),_templateObject5$6=_taggedTemplateLiteral$21(['<div id="annex-','" class="lego-reply-annex"><i class="anticon anticon-paper-clip"></i></div>'],['<div id="annex-','" class="lego-reply-annex"><i class="anticon anticon-paper-clip"></i></div>']),Reply=function(_Lego$UI$Baseview){function Reply(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$27(this,Reply);var options={events:{"focus .lego-reply-content":"onFocus","click .lego-reply-submit":"submit","click .lego-reply-annex":"showUpload","click .popover-title i":"showUpload","keydown .lego-reply-content":"_enterSearch"},placeholder:"请输入回复内容",contentHeight:70,showFacial:!0,showUpload:!0,filterHtml:!0,uploadToken:null,facialIconsUrl:"",submitText:"回复",submitType:"primary",contentRequired:!0,maxTextLength:500,onSubmit:function(){},onUploadComplete:function(){},dropdownbtn:!1,components:[]};Object.assign(options,opts),options.showFacial&&options.components.push({el:"#facial-"+options.vid,target:"#content-"+options.vid,targetType:"textarea",iconsUrl:options.facialIconsUrl}),options.dropdownbtn&&options.components.push(Object.assign("object"==_typeof$6(options.dropdownbtn)?options.dropdownbtn:{},{el:"#dropdownbtn-"+options.vid,text:options.submitText,btnType:options.submitType,className:"float-right",onClick:function(self,item,event){var parentView=self.options.context;parentView&&parentView.submit()}}));var _this=_possibleConstructorReturn$23(this,(Reply.__proto__||Object.getPrototypeOf(Reply)).call(this,options));return _this.uploadView=null,_this.placeholder='<span class="lego-reply-ph">'+_this.options.placeholder+"</span>",_this}return _inherits$23(Reply,_Lego$UI$Baseview),_createClass$27(Reply,[{key:"render",value:function(){var options=this.options,vDom=hx(_templateObject$21,val(options.placeholder),options.vid,options.dropdownbtn?hx(_templateObject2$20,options.vid):hx(_templateObject3$13,options.submitType,val(options.submitText)),options.showFacial?hx(_templateObject4$8,options.vid):"",options.showUpload?hx(_templateObject5$6,options.vid):"",options.vid);return vDom}},{key:"renderAfter",value:function(){
this.$(".lego-reply-content").attr("contenteditable","true").height(this.options.contentHeight)}},{key:"onFocus",value:function(event){var target=$(event.currentTarget);target.find(".lego-reply-ph").length&&target.html("")}},{key:"showUpload",value:function(event){this.$(".popover").toggleClass("show");var options=this.options,that=this;options.showUpload&&this.$(".popover").hasClass("show")&&("string"==typeof options.uploadToken&&(this.uploadView=Lego.create(Upload,{el:"#upload-"+options.vid,token:options.uploadToken,context:this,onComplete:options.onUploadComplete})),"object"==_typeof$6(options.uploadToken)&&(this.uploadView=Lego.create(Upload,{el:"#upload-"+options.vid,dataSource:options.uploadToken,context:that,onComplete:options.onUploadComplete})))}},{key:"_enterSearch",value:function(event){var target=$(event.currentTarget);this.options;13===event.which&&(event.ctrlKey||this.submit(event),event.ctrlKey&&Lego.UI.Util.insertText(target,Lego.UI.Util.checkBrowser().mozilla?"<br>":"<br><br>"))}},{key:"getUploadIds",value:function(){return this.uploadView?this.uploadView.getValue():[]}},{key:"submit",value:function(event){event&&event.stopPropagation();var contentEl=this.$(".lego-reply-content");if(contentEl.val().length>this.options.maxTextLength)return void Lego.UI.message("warning","提交内容不能大于500个字符");var contentHtml=contentEl.val();if(contentHtml=this.options.filterHtml?contentHtml.replace(/<[^>]+>/g,"").replace(/\r\n/g,"").replace(/\n/g,""):contentHtml,contentHtml=$.trim(contentHtml),!contentHtml.length&&this.options.contentRequired)return void Lego.UI.message("warning","提交内容不能为空");contentEl.val(""),contentHtml=contentHtml==this.placeholder?"":contentHtml;var uploadIds=Array.from(this.getUploadIds());this.uploadView&&this.uploadView.reset(),this.$(".popover").removeClass("show"),"function"==typeof this.options.onSubmit&&this.options.onSubmit(this,contentHtml,uploadIds)}}]),Reply}(Lego.UI.Baseview);Lego.components("reply",Reply);var _createClass$32=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Tooltip$2=function(){function Tooltip(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$32(this,Tooltip);var options={el:"",selector:!1,title:"",content:"",animation:!0,container:!1,delay:0,html:!1,placement:"top",template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',eventName:"hover focus",constraints:[],offset:"0 0",onClose:function(){}};Object.assign(options,opts),this.el=options.el,this.onHidden=options.onHidden,this.options={selector:options.selector,title:options.title,content:options.content,animation:options.animation,container:options.container,delay:options.delay,html:options.html,placement:options.placement,template:options.template,constraints:options.constraints,trigger:options.eventName,offset:options.offset},this.render()}return _createClass$32(Tooltip,[{key:"render",value:function(){var that=this,el=this.el instanceof $?this.el:$(this.el);return el.length&&(el.tooltip(this.options),el.on("hidden.bs.tooltip",function(){"function"==typeof that.onClose&&that.onClose(event)})),el}}]),Tooltip}(),fun$2=function(opts){return new Tooltip$2(opts)};Lego.components("tooltip",fun$2);var _createClass$31=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$24=_taggedTemplateLiteral$24(['<div class="lego-rating ','">\n        <input type="hidden" name="','" id="rating-','" class="','" value="','"/>\n        ',"\n        </div>\n        "],['<div class="lego-rating ','">\n        <input type="hidden" name="','" id="rating-','" class="','" value="','"/>\n        ',"\n        </div>\n        "]),_templateObject2$23=_taggedTemplateLiteral$24(['<span class="badge badge-default">',"</span>"],['<span class="badge badge-default">',"</span>"]),Rating=function(_Lego$UI$Baseview){function Rating(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$31(this,Rating);var options={fractions:0,step:2,start:0,stop:10,icon:"anticon",filled:"star",filledSelected:"star",empty:"star-o",tooltipOption:{title:"",container:"body",placement:"bottom"},showTip:!1,showLabel:!1,disabled:!1,readonly:!1,value:0,size:"",onChange:function(){}};Object.assign(options,opts);var _this=_possibleConstructorReturn$27(this,(Rating.__proto__||Object.getPrototypeOf(Rating)).call(this,options));return _this.init(),_this}return _inherits$27(Rating,_Lego$UI$Baseview),_createClass$31(Rating,[{key:"render",value:function(){var options=this.options,vDom=hx(_templateObject$24,options.size?"lego-rating-"+options.size:"",val(options.name),options.vid,options.showTip?"rating-tooltip":"rating",options.value,options.showLabel?hx(_templateObject2$23,val(options.value)):"");return vDom}},{key:"init",value:function(){var options=this.options,that=this,inputEl=this.$("#rating-"+options.vid),inputAttr={},tooltipOption=options.tooltipOption,iconStr=options.icon+" "+options.icon+"-",ratingConfig={fractions:options.fractions,step:options.step,start:options.start,stop:options.stop,filled:iconStr+options.filled,filledSelected:iconStr+options.filledSelected,empty:iconStr+options.empty};options.disabled&&(inputAttr.disabled=options.disabled),options.readonly&&(inputAttr["data-readonly"]=""),inputEl.attr(inputAttr),tooltipOption.title&&!function(){var theTitle=tooltipOption.title;ratingConfig.extendSymbol=function(rate){theTitle.indexOf("###")>=0?tooltipOption.title=theTitle.replace(/###/g,rate):tooltipOption.title=theTitle+rate,$(this).tooltip(tooltipOption)}}(),inputEl.rating(ratingConfig),inputEl.on("change",function(){var val=$(this).val();that.setValue(val),options.showLabel&&$(this).next(".badge").text(val),"function"==typeof options.onChange&&options.onChange(that,val)})}},{key:"setValue",value:function(val){return val&&(this.options.value=Number(val)),this}},{key:"getValue",value:function(){return this.options.value}}]),Rating}(Lego.UI.Baseview);Lego.components("rating",Rating);var _createClass$33=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$25=_taggedTemplateLiteral$25(['\n        <div class="input-group lego-search ','">\n        ','\n          <input type="text" class="form-control lego-search-input" placeholder="','" name="','" value="','">\n          <div class="input-group-btn">\n            <button type="button" class="btn lego-search-button">\n              <i class="anticon anticon-search"></i>\n            </button>\n          </div>\n        </div>\n        '],['\n        <div class="input-group lego-search ','">\n        ','\n          <input type="text" class="form-control lego-search-input" placeholder="','" name="','" value="','">\n          <div class="input-group-btn">\n            <button type="button" class="btn lego-search-button">\n              <i class="anticon anticon-search"></i>\n            </button>\n          </div>\n        </div>\n        ']),_templateObject2$24=_taggedTemplateLiteral$25(['\n          <div class="input-group-btn dropdown" id="select-','">\n            <button type="button" class="btn btn-secondary dropdown-toggle">\n              ','\n            </button>\n            <dropdown id="dropdown-','"></dropdown>\n          </div>\n        '],['\n          <div class="input-group-btn dropdown" id="select-','">\n            <button type="button" class="btn btn-secondary dropdown-toggle">\n              ','\n            </button>\n            <dropdown id="dropdown-','"></dropdown>\n          </div>\n        ']),Search=function(_Lego$UI$Baseview){function Search(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$33(this,Search);var options={events:{"click .lego-search-button":"onSearch","change .lego-search-input":"onChange","keydown .lego-search-input":"_enterSearch"},placeholder:"请输入关键字",name:"",size:"",keyword:"",activeKey:"",activeValue:"",showSelect:!1,onSearch:function(){},onChange:function(){}};return Object.assign(options,opts),_possibleConstructorReturn$28(this,(Search.__proto__||Object.getPrototypeOf(Search)).call(this,options))}return _inherits$28(Search,_Lego$UI$Baseview),_createClass$33(Search,[{key:"components",value:function(){var opts=this.options;"string"==typeof opts.value&&(opts.keyword=opts.value,opts.value=null),this.addCom({el:"#dropdown-"+opts.vid,container:"#select-"+opts.vid,data:opts.data,onChange:function(self,model){this.context.options.activeKey=model.key,this.context.options.activeValue=model.value}})}},{key:"render",value:function(){var options=this.options||{},vDom=hx(_templateObject$25,options.size?"input-group-"+options.size:"",options.showSelect?hx(_templateObject2$24,options.vid,options.activeValue||"请选择",options.vid):"",options.placeholder,options.name,val(options.keyword));return vDom}},{key:"_enterSearch",value:function(event){13==event.keyCode&&this.onSearch(event)}},{key:"getValue",value:function(event){var keyword=event?this.$(".lego-search-input").val():this.options.keyword;return{key:this.options.activeKey,value:this.options.activeValue,keyword:keyword}}},{key:"onChange",value:function(event){event&&event.stopPropagation(),"function"==typeof this.options.onChange&&this.options.onChange(this,this.getValue(event))}},{key:"onSearch",value:function(event){event&&event.stopPropagation(),"function"==typeof this.options.onSearch&&this.options.onSearch(this,this.getValue(event))}}]),Search}(Lego.UI.Baseview);Lego.components("search",Search);var _typeof$8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass$34=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$26=_taggedTemplateLiteral$26(["\n                <ul>","\n                </ul>\n                "],["\n                <ul>","\n                </ul>\n                "]),_templateObject2$25=_taggedTemplateLiteral$26(['\n                    <li class="select-tag" id="','" title="','">\n                        <div class="select-tag-content">','</div>\n                        <span class="select-tag-close"></span>\n                    </li>\n                    '],['\n                    <li class="select-tag" id="','" title="','">\n                        <div class="select-tag-content">','</div>\n                        <span class="select-tag-close"></span>\n                    </li>\n                    ']),_templateObject3$16=_taggedTemplateLiteral$26(['\n            <div class="select dropdown ','">\n                <div id="select-','">\n                    <input type="text" class="form-control '," select-input ",'" placeholder="','" value="','" name="hidden_','">\n                    <input type="hidden" name="','" value="','">\n                    <dropdown id="dropdown-','"></dropdown>\n                </div>\n            </div>\n            '],['\n            <div class="select dropdown ','">\n                <div id="select-','">\n                    <input type="text" class="form-control '," select-input ",'" placeholder="','" value="','" name="hidden_','">\n                    <input type="hidden" name="','" value="','">\n                    <dropdown id="dropdown-','"></dropdown>\n                </div>\n            </div>\n            ']),_templateObject4$11=_taggedTemplateLiteral$26(['\n            <div class="select dropdown multiple ','">\n                <div id="select-','">\n                    <input type="text" class="form-control '," select-input ",'" placeholder="','" value="','" name="hidden_','">\n                    <input type="hidden" name="','" value="','">\n                    <div class="select-tags-div clearfix ','">\n                        ','\n                    </div>\n                    <dropdown id="dropdown-','"></dropdown>\n                </div>\n            </div>\n            '],['\n            <div class="select dropdown multiple ','">\n                <div id="select-','">\n                    <input type="text" class="form-control '," select-input ",'" placeholder="','" value="','" name="hidden_','">\n                    <input type="hidden" name="','" value="','">\n                    <div class="select-tags-div clearfix ','">\n                        ','\n                    </div>\n                    <dropdown id="dropdown-','"></dropdown>\n                </div>\n            </div>\n            ']),Selects=function(_Lego$UI$Baseview){function Selects(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$34(this,Selects);var options={name:"",value:[],multiple:!1,eventName:"click",fieldName:"key",filterOption:!0,tags:!1,onDeselect:function(){},onChange:function(){},onSearch:function(){},placeholder:"请选择",notFoundContent:"",dropdownWidth:"100%",dropdownHeight:0,optionFilterProp:"",combobox:!1,size:"",showSearch:!1,inputAble:!1,disabled:!1,defaultActiveFirstOption:!1,dropdownStyle:null,dropdownClassName:"",splitString:"",components:[]};Object.assign(options,opts);var _this=_possibleConstructorReturn$29(this,(Selects.__proto__||Object.getPrototypeOf(Selects)).call(this,options));_this.oldValue="";var that=_this;return _this.$(".select-input").change(function(event){"function"==typeof options.onChange&&options.onChange(that,$(this).val())}),_this.$(".select-tags-div").on("click",".select-tag-close",_this.clickItemClose.bind(_this)),_this}return _inherits$29(Selects,_Lego$UI$Baseview),_createClass$34(Selects,[{key:"components",value:function(){var opts=this.options;opts.data.length&&this.addCom({el:"#dropdown-"+opts.vid,container:"#select-"+opts.vid,scrollbar:opts.dropdownHeight?{}:null,eventName:opts.eventName||"click",disabled:opts.disabled||!1,style:Object.assign({width:opts.dropdownWidth,maxHeight:opts.dropdownHeight||"auto",overflow:"auto"},opts.dropdownStyle||{}),className:opts.dropdownClassName,clickAndClose:!opts.multiple,data:opts.data||[],onChange:function(self,model){var that=this.context;that.$(".select-input").focus(),"0"!==model.key&&opts.multiple?(that.options.data.forEach(function(item){"0"==item.key&&(item.selected=!1)}),that.getValue(),that.options.value.includes(model)||(model.selected=!0,that.options.value.push(model))):(that.options.data.forEach(function(item){return item.selected=!1}),that.options.value=[model],that.refresh()),that.options.onChange(that,model)}})}},{key:"render",value:function(){function getTags(data){return data.length?hx(_templateObject$26,data.map(function(item){return hx(_templateObject2$25,item.key,item.value,item.value)})):""}var opts=this.options,vDom="",theValueArr=void 0,realValueArr=void 0;return Array.isArray(opts.value)?(theValueArr=opts.value.length?opts.value.map(function(item){return item.value}):[],realValueArr=opts.value.length?opts.value.map(function(item){return item[opts.fieldName]}):[]):theValueArr=realValueArr=["object"==_typeof$8(opts.value)?opts.value.value:opts.value],vDom=opts.multiple?hx(_templateObject4$11,opts.size,opts.vid,opts.size?"form-control-"+opts.size:"",theValueArr.length?"select-hasValue":"",theValueArr.length?"":opts.placeholder,theValueArr.join(","),opts.name,opts.name,realValueArr.join(","),theValueArr.length?"select-tags-div-border":"",getTags(opts.value),opts.vid):hx(_templateObject3$16,opts.size,opts.vid,opts.size?"form-control-"+opts.size:"",opts.disabled?"disabled":"",opts.placeholder,theValueArr.join(","),opts.name,opts.name,realValueArr.join(","),opts.vid)}},{key:"renderAfter",value:function(){var _this2=this;this.options.value&&this.options.multiple&&this.options.value.forEach(function(item){if(item){var model=_this2.options.data.find(function(model){return model.key===item.key});model&&(model.selected=!0)}}),this.options.inputAble||this.$(".select-input").attr("readonly","readonly")}},{key:"clickItemClose",value:function(event){event.stopPropagation();var target=$(event.target).parent(),key=target.attr("id"),value=target.attr("title");this.options.data.forEach(function(item){item.key==key&&(item.selected=!1)}),this.getValue(),this.refresh(),Lego.getView("#dropdown-"+this.options.vid).refresh(),"function"==typeof this.options.onDeselect&&this.options.onDeselect(this,{key:key,value:value})}},{key:"setValue",value:function(value){var data=this.options.data;value.length&&value.forEach(function(item){var model=data.find(function(model){return model.key===item.key});model?Object.assign(model,item):data.push(item)})}},{key:"getValue",value:function(){return this.options.value=this.options.data.filter(function(item){return 1==item.selected&&"0"!==item.key}),this.options.value}}]),Selects}(Lego.UI.Baseview);Lego.components("selects",Selects);var _createClass$35=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$27=_taggedTemplateLiteral$27(['\n        <div class="lego-steps lego-steps-'," lego-steps-label-"," ",'">\n        ',"\n        </div>\n        "],['\n        <div class="lego-steps lego-steps-'," lego-steps-label-"," ",'">\n        ',"\n        </div>\n        "]),_templateObject2$26=_taggedTemplateLiteral$27(['\n            <div class="lego-steps-item lego-steps-status-','"\n            style="'," margin-right:-",'px;">\n                ','\n                <div class="lego-steps-step">\n                    <div class="lego-steps-head">\n                        <div class="lego-steps-head-inner">\n                        ','\n                        </div>\n                    </div>\n                    <div class="lego-steps-main">\n                        <div class="lego-steps-title">',"</div>\n                        ","\n                    </div>\n                </div>\n            </div>\n            "],['\n            <div class="lego-steps-item lego-steps-status-','"\n            style="'," margin-right:-",'px;">\n                ','\n                <div class="lego-steps-step">\n                    <div class="lego-steps-head">\n                        <div class="lego-steps-head-inner">\n                        ','\n                        </div>\n                    </div>\n                    <div class="lego-steps-main">\n                        <div class="lego-steps-title">',"</div>\n                        ","\n                    </div>\n                </div>\n            </div>\n            "]),_templateObject3$17=_taggedTemplateLiteral$27(['<div class="lego-steps-tail"\n                style="','"><i></i></div>'],['<div class="lego-steps-tail"\n                style="','"><i></i></div>']),_templateObject4$12=_taggedTemplateLiteral$27(['<span class="lego-steps-icon anticon ','">\n                            ',"\n                            </span>"],['<span class="lego-steps-icon anticon ','">\n                            ',"\n                            </span>"]),_templateObject5$9=_taggedTemplateLiteral$27(['<span class="lego-steps-icon">',"</span>"],['<span class="lego-steps-icon">',"</span>"]),_templateObject6$4=_taggedTemplateLiteral$27(['<div class="lego-steps-description">',"</div>"],['<div class="lego-steps-description">',"</div>"]),Steps=function(_Lego$UI$Baseview){function Steps(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$35(this,Steps);var options={current:0,status:"process",size:"default",direction:"horizontal",titleWidth:120,showDescription:!0,showIcon:!0,showNum:!0,data:[],onNext:function(){},onPrevious:function(){}};return Object.assign(options,opts),_possibleConstructorReturn$30(this,(Steps.__proto__||Object.getPrototypeOf(Steps)).call(this,options))}return _inherits$30(Steps,_Lego$UI$Baseview),_createClass$35(Steps,[{key:"render",value:function(){var options=this.options,dataLength=options.data.length,widthPercent=10/(dataLength-1)*10,vDom=hx(_templateObject$27,options.direction,options.direction,options.showNum?"":"lego-steps-sm",options.data.map(function(item,index){return hx(_templateObject2$26,options.current==index?options.status:item.status?item.status:options.current>index?"finish":"wait",index==dataLength-1?"":"width:"+widthPercent+"%;",options.titleWidth/2,index<dataLength?hx(_templateObject3$17,index==dataLength-1?"padding-right:"+options.titleWidth+"px":"padding-right:"+options.titleWidth/2+"px"):"",options.showIcon?hx(_templateObject4$12,item.icon?item.icon:"finish"==item.status?"anticon-check":"","finish"!==item.status?item.icon?item.icon:options.showNum?index+1:"":""):hx(_templateObject5$9,options.showNum?index+1:""),val(item.title),options.showDescription?hx(_templateObject6$4,val(item.description)):"")}));return vDom}},{key:"changeStatus",value:function(){var options=this.options;options.current>options.data.length&&(options.current=options.data.length),options.data.forEach(function(item,index){item.status="wait",index<options.current&&(item.status="finish"),options.current==index&&(item.status=options.status)}),this.refresh()}},{key:"next",value:function(){var options=this.options;options.current++,this.changeStatus(),"function"==typeof options.onNext&&options.onNext(this,options.current)}},{key:"previous",value:function(){var options=this.options;options.current--,this.changeStatus(),"function"==typeof options.onPrevious&&options.onPrevious(this,options.current)}}]),Steps}(Lego.UI.Baseview);Lego.components("steps",Steps);var _createClass$36=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$28=_taggedTemplateLiteral$28(['\n        <div class="lego-tabs">\n            <navs id="navs-','"></navs>\n            <div class="tab-content ','">\n                ',"\n            </div>\n        </div>\n        "],['\n        <div class="lego-tabs">\n            <navs id="navs-','"></navs>\n            <div class="tab-content ','">\n                ',"\n            </div>\n        </div>\n        "]),_templateObject2$27=_taggedTemplateLiteral$28(['<div class="tab-pane '," ",'">\n                            ',"\n                        </div>"],['<div class="tab-pane '," ",'">\n                            ',"\n                        </div>"]),Tabs=function(_Lego$UI$Baseview){function Tabs(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$36(this,Tabs);var options={eventName:"click",type:"line",size:"default",closable:!1,activeKey:"",activeContent:"",direction:"bottom",navClassName:"",contentScrollbar:null,showAdd:!1,animateIn:Lego.config.animateAble?"fadeIn":"",animateOut:Lego.config.animateAble?"fadeOut":"",data:[],onAdd:function(){},onChange:function(){}};return Object.assign(options,opts),_possibleConstructorReturn$31(this,(Tabs.__proto__||Object.getPrototypeOf(Tabs)).call(this,options))}return _inherits$31(Tabs,_Lego$UI$Baseview),_createClass$36(Tabs,[{key:"components",value:function(){var options=this.options,comId="#navs-"+options.vid,data=options.data.filter(function(item){return!item.isHide});options.activeKey="number"==typeof options.activeKey?data[options.activeKey].key:options.activeKey;var model=data.find(function(item){return item.key==options.activeKey});model&&(options.activeContent="function"==typeof model.content?model.content():model.content),this.addCom({el:comId,eventName:options.eventName||"click",className:options.navClassName,type:"tabs",activeKey:options.activeKey,onClick:function(self,item){if(!item.disabled&&item.content){var pView=this.context;pView.options.activeKey=item.key,pView.options.activeContent="function"==typeof item.content?item.content():item.content,"function"==typeof options.onChange&&options.onChange(pView,item)}},data:data})}},{key:"render",value:function(){function getNewData(data){Array.isArray(data)&&data.length&&data.forEach(function(item){item.children?getNewData(item.children):newData.push(item)})}var options=this.options,newData=[];getNewData(options.data);var vDom=hx(_templateObject$28,options.vid,options.contentScrollbar?"scrollbar":"",newData.map(function(item){if(!item.disabled)return hx(_templateObject2$27,val(options.animate),item.key==options.activeKey?"active":"",item.key==options.activeKey?options.activeContent:"")}));return vDom}},{key:"renderAfter",value:function(){var opts=this.options;opts.animateIn&&Lego.UI.Util.animateCss(this.$(".tab-pane.active"),opts.animateIn)}}]),Tabs}(Lego.UI.Baseview);Lego.components("tabs",Tabs);var _createClass$37=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$29=_taggedTemplateLiteral$29(['\n        <div class="lego-table clearfix lego-table-'," ","\n        "," ",' lego-table-scroll-position-left">\n            <loading id="lego-loading-','"></loading>\n            ','\n            <div class="lego-table-content" style="','">\n                <div class="lego-table-scroll">\n                ','\n                <div class="lego-table-body" style="bottom: ','">\n                    ','\n                    <div class="','">\n                        <table class="','" style="','">\n                            ',"\n                            ","\n                            ","\n                            ","\n                        </table>\n                    </div>\n                </div>\n                ","\n                ","\n                </div>\n            </div>\n        </div>\n        "],['\n        <div class="lego-table clearfix lego-table-'," ","\n        "," ",' lego-table-scroll-position-left">\n            <loading id="lego-loading-','"></loading>\n            ','\n            <div class="lego-table-content" style="','">\n                <div class="lego-table-scroll">\n                ','\n                <div class="lego-table-body" style="bottom: ','">\n                    ','\n                    <div class="','">\n                        <table class="','" style="','">\n                            ',"\n                            ","\n                            ","\n                            ","\n                        </table>\n                    </div>\n                </div>\n                ","\n                ","\n                </div>\n            </div>\n        </div>\n        "]),_templateObject2$28=_taggedTemplateLiteral$29(['<div class="lego-table-title">',"</div>"],['<div class="lego-table-title">',"</div>"]),_templateObject3$18=_taggedTemplateLiteral$29(['\n                <div class="lego-table-header">\n                    <table class="" style="','">\n                        ',"\n                        ","\n                    </table>\n                </div>\n                "],['\n                <div class="lego-table-header">\n                    <table class="" style="','">\n                        ',"\n                        ","\n                    </table>\n                </div>\n                "]),_templateObject4$13=_taggedTemplateLiteral$29(['<nodata id="nodata-','"></nodata>'],['<nodata id="nodata-','"></nodata>']),_templateObject5$10=_taggedTemplateLiteral$29(['<div style="display:none;"></div>'],['<div style="display:none;"></div>']),_templateObject6$5=_taggedTemplateLiteral$29(['\n                    <div class="lego-table-footer">',"</div>\n                "],['\n                    <div class="lego-table-footer">',"</div>\n                "]),_templateObject7$4=_taggedTemplateLiteral$29(['<button type="button" class="btn btn-default noborder" title="表格设置"><i class="anticon anticon-ellipsis"></i></button>'],['<button type="button" class="btn btn-default noborder" title="表格设置"><i class="anticon anticon-ellipsis"></i></button>']),_templateObject8$4=_taggedTemplateLiteral$29(["\n        <colgroup>\n            ","\n            ","\n        </colgroup>\n        "],["\n        <colgroup>\n            ","\n            ","\n        </colgroup>\n        "]),_templateObject9$2=_taggedTemplateLiteral$29(['<col style="width: 30px;">'],['<col style="width: 30px;">']),_templateObject10=_taggedTemplateLiteral$29(['<col style="','">'],['<col style="','">']),_templateObject11=_taggedTemplateLiteral$29(['\n            <span>\n                <label class="lego-','-wrapper">\n                    ',"\n                </label>\n            </span>\n            "],['\n            <span>\n                <label class="lego-','-wrapper">\n                    ',"\n                </label>\n            </span>\n            "]),_templateObject12=_taggedTemplateLiteral$29(['<span class="lego-'," ","\n                    ",'">\n                        <span class="lego-','-inner"></span>\n                        <input type="','" ',' name="selectedrows" class="lego-','-input" value="','">\n                    </span>'],['<span class="lego-'," ","\n                    ",'">\n                        <span class="lego-','-inner"></span>\n                        <input type="','" ',' name="selectedrows" class="lego-','-input" value="','">\n                    </span>']),_templateObject13=_taggedTemplateLiteral$29(["\n        ","\n        "],["\n        ","\n        "]),_templateObject14=_taggedTemplateLiteral$29(['<th class="lego-table-selection-column">',"</th>"],['<th class="lego-table-selection-column">',"</th>"]),_templateObject15=_taggedTemplateLiteral$29(['<td class="lego-table-selection-column">',"</td>"],['<td class="lego-table-selection-column">',"</td>"]),_templateObject16=_taggedTemplateLiteral$29(['\n        <thead class="lego-table-thead">\n            <tr>\n            ',"\n            ","\n            </tr>\n        </thead>\n        "],['\n        <thead class="lego-table-thead">\n            <tr>\n            ',"\n            ","\n            </tr>\n        </thead>\n        "]),_templateObject17=_taggedTemplateLiteral$29(['<th class="','" id="','"><span title="点击排序">',"\n                ","</span>","</th>"],['<th class="','" id="','"><span title="点击排序">',"\n                ","</span>","</th>"]),_templateObject18=_taggedTemplateLiteral$29(['\n        <tbody class="lego-table-tbody">\n            ',"\n        </tbody>\n        "],['\n        <tbody class="lego-table-tbody">\n            ',"\n        </tbody>\n        "]),_templateObject19=_taggedTemplateLiteral$29(['<tr class="','" id="','">\n                ',"\n                ","\n                </tr>"],['<tr class="','" id="','">\n                ',"\n                ","\n                </tr>"]),_templateObject20=_taggedTemplateLiteral$29(["<td>","</td>"],["<td>","</td>"]),_templateObject21=_taggedTemplateLiteral$29(['\n        <tfoot class="lego-table-tfoot"><tr><td>',"</td></tr></tfoot>\n        "],['\n        <tfoot class="lego-table-tfoot"><tr><td>',"</td></tr></tfoot>\n        "]),_templateObject22=_taggedTemplateLiteral$29(['\n        <div class="lego-table-column-sorter">\n            <span class="lego-table-column-sorter-up ','" title="↑">\n                <i class="anticon anticon-caret-up"></i>\n            </span>\n            <span class="lego-table-column-sorter-down ','" title="↓">\n                <i class="anticon anticon-caret-down"></i>\n            </span>\n        </div>\n        '],['\n        <div class="lego-table-column-sorter">\n            <span class="lego-table-column-sorter-up ','" title="↑">\n                <i class="anticon anticon-caret-up"></i>\n            </span>\n            <span class="lego-table-column-sorter-down ','" title="↓">\n                <i class="anticon anticon-caret-down"></i>\n            </span>\n        </div>\n        ']),_templateObject23=_taggedTemplateLiteral$29(['<i class="anticon anticon-filter"></i>'],['<i class="anticon anticon-filter"></i>']),Tables=function(_Lego$UI$Baseview){
function Tables(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$37(this,Tables);var options={events:{"click tbody .lego-checkbox > input,.lego-radio > input":"selectOne","click thead .lego-checkbox > input":"selectAll","click th>span":"clickSorter","click .anticon-filter":"clickFilter","click .lego-table-tbody td":"clickItem","click .lego-table-scroll > button":"clickSetting"},scrollbar:{},className:"",tableWidth:0,isNodata:!1,isNowrap:!0,rowSelection:null,pagination:null,size:"default",columns:[],rowClassName:"",expandedRowKeys:[],expandAllRows:!1,locale:{filterConfirm:"确定",filterReset:"重置",emptyText:"暂无数据"},bordered:!1,showHeader:!1,showBodyer:!0,showFooter:!1,showSetting:!1,fixedHeader:!0,data:[],nodata:{},onExpandRow:function(){},onChange:function(){},onSelect:function(){},onSetting:function(){},onRowClick:function(){},components:[]};Object.assign(options,opts);var _this=_possibleConstructorReturn$32(this,(Tables.__proto__||Object.getPrototypeOf(Tables)).call(this,options)),that=_this,header=_this.$(".lego-table-header");return _this.$(".lego-table-body > .scrollbar").scroll(function(){header.scrollLeft($(this).scrollLeft())}),_this.$(".lego-table-tfoot>tr>td").attr("colspan",_this.columns.length),$(window).resize(function(){that.resizeWidth()}),_this.resizeWidth(),_this}return _inherits$32(Tables,_Lego$UI$Baseview),_createClass$37(Tables,[{key:"getColumns",value:function(){var _this2=this;this.columns=[];var options=this.options,oldWidth=this.tableRealWidth;return this.columnsObj=this.columnsObj||{},options.columns&&(this.allColumns="function"==typeof options.columns?options.columns(this):options.columns,this.columns=Array.from(this.allColumns)),this.tableRealWidth=this.options.rowSelection?30:0,this.columns.forEach(function(col,index){col.key=col.key||index,_this2.columnsObj[col.key]?Object.assign(col,_this2.columnsObj[col.key]):_this2.columnsObj[col.key]=col,col.isHide||(_this2.tableRealWidth+=parseInt(col.width||200))}),this.columns=this.columns.filter(function(col){return!col.isHide}),this.tableRealWidth!==oldWidth&&this.resizeWidth(),this.columns}},{key:"components",value:function(){var opts=this.options;this.addCom(Object.assign({el:"#pagination-"+opts.vid},opts.pagination)),opts.data.length||this.addCom(Object.assign({el:"#nodata-"+opts.vid}),Lego.config.nodata||{},opts.nodata)}},{key:"resizeWidth",value:function(){var tableWidth=$(this.options.el).parent().width();this.options.tableWidth=this.tableRealWidth>tableWidth?this.tableRealWidth:0}},{key:"render",value:function(){this.getColumns();var opts=this.options,vDom=hx(_templateObject$29,opts.size,opts.bordered?"lego-table-bordered":"",opts.showHeader&&opts.fixedHeader?"lego-table-fixed-header":"",opts.isNowrap?"lego-nr":"",opts.vid,opts.title?hx(_templateObject2$28,"function"==typeof opts.title?opts.title():opts.title):"",opts.title?"":"padding-bottom:0",opts.showHeader&&opts.fixedHeader?hx(_templateObject3$18,opts.tableWidth?"width:"+opts.tableWidth+"px":"width:1px",this._renderColgroup(),this._renderHeader()):"",opts.pagination?"48px":"0",opts.isNodata?hx(_templateObject4$13,opts.vid):hx(_templateObject5$10),opts.showHeader&&opts.fixedHeader?"scrollbar":"",opts.className,opts.tableWidth?"width:"+opts.tableWidth+"px":"width:1px",this._renderColgroup(),opts.showHeader&&opts.fixedHeader||!opts.showHeader?"":this._renderHeader(),opts.showBodyer?this._renderBodyer():"",opts.showFooter?this._renderFooter():"",opts.pagination&&opts.data?hx(_templateObject6$5,val(opts.pagination)):"",opts.showSetting?hx(_templateObject7$4):"");return vDom}},{key:"renderAfter",value:function(){this.options.showFooter&&this.columns.length&&this.$(".lego-table-tfoot > tr > td").attr("colspan",this.columns.length)}},{key:"_getRowKey",value:function(){var str=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.rowKey=this.rowKey||0,this.rowKey++,str+this.rowKey}},{key:"_renderColgroup",value:function(){var _this3=this,vDom=hx(_templateObject8$4,this.options.rowSelection?hx(_templateObject9$2):"",this.columns.map(function(col,index){var w=index!==_this3.columns.length-1||_this3.options.tableWidth?"width:"+("number"==typeof col.width?col.width+"px":col.width.toString()):"";return hx(_templateObject10,w)}));return vDom}},{key:"_renderSelection",value:function(){function getHx(){return hx(_templateObject11,theType,"th"!==tagName||isCheckbox?hx(_templateObject12,theType,row.disabled?"lego-"+theType+"-disabled":"",isChecked?"lego-"+theType+"-checked lego-"+theType+"-checked-1":isHarf?"lego-"+theType+"-indeterminate":"",theType,theType,row.disabled?"disabled":"",theType,isChecked?"on":""):"")}var row=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},tagName=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"td",isHarf=arguments[2],opts=this.options,theType=opts.rowSelection.type||"checkbox",isCheckbox="checkbox"==theType,isChecked=row._selected||"th"===tagName&&1===this.getSelectedStatus(),vDom=hx(_templateObject13,"th"==tagName?hx(_templateObject14,getHx()):hx(_templateObject15,getHx()));return vDom}},{key:"_renderHeader",value:function(){var _this4=this,opts=this.options,vDom=hx(_templateObject16,opts.rowSelection?this._renderSelection({},"th",2===this.getSelectedStatus()):"",this.columns.map(function(col){return col.isHide?"":hx(_templateObject17,col.sorter?"lego-table-column-sort":"",col.key,col.title,col.sorter?_this4._renderSorter(col):"",_this4._renderFilter(col))}));return vDom}},{key:"_renderBodyer",value:function(){var _this5=this,opts=this.options;if(opts.data){var vDom=hx(_templateObject18,opts.data.map(function(row,i){return row.key=row.id||_this5._getRowKey("row_"),hx(_templateObject19,opts.rowClassName,row.key,opts.rowSelection?_this5._renderSelection(row,"td"):"",_this5.columns.map(function(col){return col.isHide?"":hx(_templateObject20,"function"==typeof col.format?col.format(row[col.dataIndex],row,col):row[col.dataIndex])}))}));return vDom}}},{key:"_renderFooter",value:function(){var opts=this.options,vDom=hx(_templateObject21,opts.footer?options.footer():"");return vDom}},{key:"_renderSorter",value:function(){var col=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},vDom=(this.options,hx(_templateObject22,"asc"==col.sortOrder?"on":"off","desc"==col.sortOrder?"on":"off"));return vDom}},{key:"_renderFilter",value:function(){var col=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return col.filter?hx(_templateObject23):""}},{key:"clickSorter",value:function(event){event.stopPropagation();var target=$(event.currentTarget),key=target.closest("th").attr("id"),col=this.columnsObj[key],oldCol=this.columns.find(function(item){return item.key==key});if(col){switch(col.sortOrder=col.sortOrder||"",col.sortOrder){case"asc":col.sortOrder="desc";break;case"desc":col.sortOrder="";break;case"":col.sortOrder="asc"}this.refresh(),oldCol&&"function"==typeof oldCol.sorter&&oldCol.sorter(this,col,event)}}},{key:"clickItem",value:function(event){event.stopPropagation();var target=$(event.currentTarget),rowKey=target.parent().attr("id"),colKey=this.$el.find("thead").find("th").eq(event.currentTarget.cellIndex).attr("id"),row=this.options.data.find(function(val){return val.key==rowKey}),col=this.columns.find(function(val){return val.key==colKey});row&&col&&(this.options.onRowClick&&"function"==typeof col.onRowClick&&col.onRowClick(this,row,event),col.onCellClick&&"function"==typeof col.onCellClick&&col.onCellClick(this,row,col,event))}},{key:"clickFilter",value:function(event){event.stopPropagation();var target=$(event.currentTarget),colKey=target.closest("th").attr("id"),col=this.columns.find(function(val){return val.key==colKey});col&&"function"==typeof col.filter&&col.filter(this,col,event)}},{key:"clickSetting",value:function(event){event.stopPropagation();$(event.currentTarget),"setting-"+this.options.vid;"function"==typeof this.options.onSetting&&this.options.onSetting(this,event)}},{key:"selectOne",value:function(event){var target=$(event.currentTarget),trEl=target.closest("tr"),id=trEl.attr("id"),options=this.options;if(options.rowSelection){if("radio"==options.rowSelection.type)options.data.forEach(function(item){item._selected=item.key==id});else{var row=options.data.find(function(value,index,arr){return value.key==id});row&&(row._selected=!row._selected)}var hasSelectedArr=this.options.data.filter(function(value){return value._selected===!0});"function"==typeof options.onSelect&&options.onSelect(this,this.getSelectedStatus()?Array.from(hasSelectedArr):[]),this.refresh()}}},{key:"getSelectedStatus",value:function(){if(Array.isArray(this.options.data)){var hasSelectedArr=this.options.data.filter(function(value){return value._selected===!0});return this.selectedAll=hasSelectedArr.length?hasSelectedArr.length==this.options.data.length?1:hasSelectedArr.length?2:0:0,this.selectedAll}return[]}},{key:"selectAll",value:function(event){var _this6=this;event.stopPropagation();var target=$(event.currentTarget);this.options.rowSelection&&!function(){var isChecked=target.is(":checked"),isSelected=isChecked?1:0;_this6.selectedAll=isSelected,_this6.options.data.map(function(row,index){row._selected=!!isSelected}),"function"==typeof _this6.options.onSelect&&_this6.options.onSelect(_this6,isSelected?Array.from(_this6.options.data):[]),_this6.refresh()}()}},{key:"getSelected",value:function(){return Array.isArray(this.options.data)?this.options.data.filter(function(row){return 1==row._selected}):[]}}]),Tables}(Lego.UI.Baseview);Lego.components("tables",Tables);var _createClass$38=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$30=_taggedTemplateLiteral$30(['<ul class="lego-tree"></ul>'],['<ul class="lego-tree"></ul>']),Tree=function(_Lego$UI$Baseview){function Tree(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$38(this,Tree);var options={disSelect:"",onlySelect:"",setting:{},value:[],data:[],onChecked:function(){},onClick:function(){}};return $.extend(!0,options,opts),_possibleConstructorReturn$33(this,(Tree.__proto__||Object.getPrototypeOf(Tree)).call(this,options))}return _inherits$33(Tree,_Lego$UI$Baseview),_createClass$38(Tree,[{key:"components",value:function(){function selectOrNo(treeNode){return(!opts.disSelect||!Object.keys(treeNode).includes(opts.disSelect))&&!(opts.onlySelect&&!Object.keys(treeNode).includes(opts.onlySelect))}function selectResult(treeId,treeNode){var treeObj=$.fn.zTree.getZTreeObj(treeId),nodes=treeObj.getCheckedNodes(!0),result=nodes.filter(function(node){return selectOrNo(node)}),newValue=[];result.forEach(function(val,index){newValue.push(Object.assign({key:val.id,value:val.name},val))}),"function"==typeof opts.onChecked&&opts.onChecked(that,newValue,treeNode)}var opts=this.options,that=this;opts.setting.check?(opts.setting.check=$.extend(!0,{enable:!0,chkboxType:{Y:"",N:""}},opts.setting.check||{}),opts.setting.callback=Object.assign(opts.setting.callback||{},{onCheck:function(event,treeId,treeNode){selectResult(treeId,treeNode)},onClick:function(event,treeId,treeNode){if(!selectOrNo(treeNode))return!1;var treeObj=$.fn.zTree.getZTreeObj(treeId);treeObj.checkNode(treeNode,null,!0),selectResult(treeId,treeNode)}})):opts.setting.callback=Object.assign(opts.setting.callback||{},{onClick:function(event,treeId,treeNode){return!!selectOrNo(treeNode)&&void("function"==typeof opts.onClick&&opts.onClick(that,Object.assign({key:treeNode.id,value:treeNode.name},treeNode)))}}),opts.data.length&&this.renderTree()}},{key:"render",value:function(){return hx(_templateObject$30)}},{key:"renderTree",value:function(){var opts=this.options,treeObj=$.fn.zTree.getZTreeObj(opts.id);treeObj&&treeObj.destroy(),$.fn.zTree.init(this.$el,opts.setting,opts.data)}},{key:"search",value:function(){var keyword=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$("li").hide(),""==keyword?this.$("li").show():this.$("span.node_name").each(function(index,el){$(el).text().indexOf(keyword)>-1&&$(el).parents("li").show()})}},{key:"clearChecked",value:function(key,value){var opts=this.options,ztree$$1=$.fn.zTree.getZTreeObj(opts.id),node=ztree$$1.getNodeByParam(key,value,null);node&&ztree$$1.checkNode(node,!1,!1)}}]),Tree}(Lego.UI.Baseview);Lego.components("tree",Tree);var _typeof$9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass$39=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$31=_taggedTemplateLiteral$31(["\n                <ul>",'\n                    <li class="select-search">\n                        <input value="" class="select-search-input">\n                    </li>\n                </ul>\n                '],["\n                <ul>",'\n                    <li class="select-search">\n                        <input value="" class="select-search-input">\n                    </li>\n                </ul>\n                ']),_templateObject2$29=_taggedTemplateLiteral$31(['\n                    <li class="select-tag" id="','" title="','">\n                        <div class="select-tag-content">','</div>\n                        <span class="select-tag-close"></span>\n                    </li>\n                    '],['\n                    <li class="select-tag" id="','" title="','">\n                        <div class="select-tag-content">','</div>\n                        <span class="select-tag-close"></span>\n                    </li>\n                    ']),_templateObject3$19=_taggedTemplateLiteral$31(['\n            <div class="select dropdown treeselect">\n                <div id="select-','">\n                    <input type="text" class="form-control select-input ','" placeholder="','" value="','" name="hidden_','">\n                    <input type="hidden" name="','" value="','">\n                    <div class="dropdown-menu ','" style="width:100%;">\n                        <div class="scrollbar">\n                            <tree id="tree-','"></tree>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n            '],['\n            <div class="select dropdown treeselect">\n                <div id="select-','">\n                    <input type="text" class="form-control select-input ','" placeholder="','" value="','" name="hidden_','">\n                    <input type="hidden" name="','" value="','">\n                    <div class="dropdown-menu ','" style="width:100%;">\n                        <div class="scrollbar">\n                            <tree id="tree-','"></tree>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n            ']),_templateObject4$14=_taggedTemplateLiteral$31(['\n            <div class="select dropdown treeselect multiple">\n                <div id="select-','">\n                    <input type="text" class="form-control select-input ','" placeholder="','" value="','" name="hidden_','">\n                    <input type="hidden" name="','" value="','">\n                    <div class="select-tags-div clearfix ','">\n                        ','\n                    </div>\n                    <div class="dropdown-menu ','" style="width:100%;">\n                        <div class="scrollbar">\n                            <tree id="tree-','"></tree>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            '],['\n            <div class="select dropdown treeselect multiple">\n                <div id="select-','">\n                    <input type="text" class="form-control select-input ','" placeholder="','" value="','" name="hidden_','">\n                    <input type="hidden" name="','" value="','">\n                    <div class="select-tags-div clearfix ','">\n                        ','\n                    </div>\n                    <div class="dropdown-menu ','" style="width:100%;">\n                        <div class="scrollbar">\n                            <tree id="tree-','"></tree>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            ']),Treeselect=function(_Selects){function Treeselect(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$39(this,Treeselect);var options={name:"",value:[],multiple:!1,eventName:"click",scrollbar:{},fieldName:"key",disSelect:"",onlySelect:"",treeDataSource:null,tags:!1,placeholder:"",inputAble:!1,notFoundContent:"",dropdownWidth:"100%",dropdownHeight:"auto",combobox:!1,size:"",showSearch:!1,disabled:!1,dropdownStyle:null,dropdownClass:"",splitString:"",clickAndClose:!opts.multiple,onDeselect:function(){},onChange:function(){},onSearch:function(){}};return Object.assign(options,opts),options.value&&(Array.isArray(options.value)||(options.value=[options.value]),options.value.forEach(function(item){item.selected=!0})),_possibleConstructorReturn$34(this,(Treeselect.__proto__||Object.getPrototypeOf(Treeselect)).call(this,options))}return _inherits$34(Treeselect,_Selects),_createClass$39(Treeselect,[{key:"components",value:function(){var opts=this.options;opts.data.length&&this.addCom({el:"#tree-"+opts.vid,disSelect:opts.disSelect,onlySelect:opts.onlySelect,setting:$.extend(!0,{},opts.treeSetting||{}),value:opts.value||[],data:opts.data||[],onChecked:function(self,result){var that=this.context;"0"!==result.key&&opts.setting.check&&(that.getValue(),result.length?(that.options.value=[],result.forEach(function(val){that.options.value.push(Object.assign({key:val.key,value:val.value,type:val.type,selected:!0},val))})):that.options.value=[]),that.options.onChange(that,result)},onClick:function(self,result){var that=this.context;that.options.value.forEach(function(item){return item.selected=!1}),that.options.value=[Object.assign({key:result.key,value:result.value,type:result.type,selected:!0},result)],that.options.onChange(that,result),that.options.clickAndClose&&that.close()},disabled:opts.disabled||!1,className:opts.dropdownClass})}},{key:"render",value:function(){function getTags(data){return data.length?hx(_templateObject$31,data.map(function(item){return hx(_templateObject2$29,item.key,item.value,item.value)})):""}var opts=this.options,vDom="",theValueArr=void 0,realValueArr=void 0;return Array.isArray(opts.value)?(theValueArr=opts.value.length?opts.value.map(function(item){return item.value}):[],realValueArr=opts.value.length?opts.value.map(function(item){return item[opts.fieldName]}):[]):theValueArr=realValueArr=["object"==_typeof$9(opts.value)?opts.value.value:opts.value],vDom=opts.multiple?hx(_templateObject4$14,opts.vid,theValueArr.length?"select-hasValue":"",theValueArr.length?"":opts.placeholder,theValueArr.join(","),opts.name,opts.name,realValueArr.join(","),theValueArr.length?"select-tags-div-border":"",getTags(opts.value),opts.direction?"drop"+opts.direction:"",opts.vid):hx(_templateObject3$19,opts.vid,opts.disabled?"disabled":"",opts.placeholder,theValueArr.join(","),opts.name,opts.name,realValueArr.join(","),opts.direction?"drop"+opts.direction:"",opts.vid)}},{key:"renderAfter",value:function(){var opts=this.options,trigger=this.$("#select-"+opts.vid),_eventName=(this.$(".select-tags-div"),this.$("#tree-"+opts.vid),"click.dropdown_"+opts.vid),that=this;if(opts.inputAble||this.$(".select-input").attr("readonly","readonly"),!opts.disabled){var handler=function(event){that.$(".dropdown-menu").slideToggle("fast")};"click"==opts.eventName?($("body, .modal-body").off(_eventName).on(_eventName,function(event){if(event.originalEvent){var index_a=event.originalEvent.path.indexOf(event.target),index_b=event.originalEvent.path.indexOf(trigger[0]);index_a<=index_b||that.close()}}),trigger.off(_eventName).on(_eventName,handler)):trigger.mouseenter(handler).mouseleave(function(){that.close()}),this.$(".select-tag-close").off(_eventName).on(_eventName,this.clickItemClose.bind(this)),this.$(".dropdown-menu").off(_eventName).on(_eventName,function(event){event.stopPropagation()}),opts.dropdownHeight&&this.$(".dropdown-menu > .scrollbar").css({maxHeight:opts.dropdownHeight,overflow:"auto"})}}},{key:"show",value:function(event){this.$(".dropdown-menu").slideDown("fast")}},{key:"close",value:function(event){this.$(".dropdown-menu").slideUp("fast")}},{key:"clickItemClose",value:function(event){event.stopPropagation();var target=$(event.currentTarget).parent(),key=target.attr("id"),value=target.attr("title"),treeView=$.fn.zTree.getZTreeObj("tree-"+this.options.vid);if(this.options.value.forEach(function(item){item.key===key&&(item.selected=!1)}),this.getValue(),this.refresh(),treeView){var treeNode=treeView.getNodeByParam(this.options.keyNames[0],key,null);treeView.checkNode(treeNode,!treeNode.checked,null,!0)}"function"==typeof this.options.onDeselect&&this.options.onDeselect(this,{key:key,value:value})}},{key:"getValue",value:function(){return this.options.value=this.options.value.filter(function(item){return item.selected===!0&&"0"!==item.key}),this.options.value}}]),Treeselect}(Selects);Lego.components("treeselect",Treeselect);var _createClass$40=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$32=_taggedTemplateLiteral$32(['\n        <div class="row transfer">\n            <div class="col-sm-6">\n                <div class="transfer-col">\n                    <h5>\n                        ',"\n                        <span>","</span>\n                    </h5>\n                    ",'\n                    <div class="transfer-col-content">\n                        <div class="scrollbar">\n                            <tree id="transfer_tree_','"></tree>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="col-sm-6">\n                <div class="transfer-col">\n                    <h5><span>','</span></h5>\n                    <div class="transfer-col-content">\n                        <div class="scrollbar">\n                            <listgroup id="transfer_list_','"></listgroup>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <i class="anticon anticon-double-right"></i>\n            <i class="anticon anticon-double-left"></i>\n        </div>\n        '],['\n        <div class="row transfer">\n            <div class="col-sm-6">\n                <div class="transfer-col">\n                    <h5>\n                        ',"\n                        <span>","</span>\n                    </h5>\n                    ",'\n                    <div class="transfer-col-content">\n                        <div class="scrollbar">\n                            <tree id="transfer_tree_','"></tree>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="col-sm-6">\n                <div class="transfer-col">\n                    <h5><span>','</span></h5>\n                    <div class="transfer-col-content">\n                        <div class="scrollbar">\n                            <listgroup id="transfer_list_','"></listgroup>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <i class="anticon anticon-double-right"></i>\n            <i class="anticon anticon-double-left"></i>\n        </div>\n        ']),_templateObject2$30=_taggedTemplateLiteral$32(['<button class="btn btn-link float-right">搜索</button>'],['<button class="btn btn-link float-right">搜索</button>']),_templateObject3$20=_taggedTemplateLiteral$32(['<search id="transfer_search_','"></search>'],['<search id="transfer_search_','"></search>']),Transfer=function(_Lego$UI$Baseview){function Transfer(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$40(this,Transfer);var options={events:{"click h5 > button":"showSearch"},titles:[],value:[],data:[],width:450,height:400,treeSetting:{},scrollbar:{},simpleData:!0,filterParentNode:!1,showSearch:!1,searchPlaceholder:"请输入搜索内容",notFoundContent:"列表为空",onChange:function(){},onSearch:null};return Object.assign(options,opts),_possibleConstructorReturn$35(this,(Transfer.__proto__||Object.getPrototypeOf(Transfer)).call(this,options))}return _inherits$35(Transfer,_Lego$UI$Baseview),_createClass$40(Transfer,[{key:"_mergeValue",value:function(){var opts=this.options;opts.value.length&&opts.data.forEach(function(item,index){var hasOne=opts.value.find(function(val){return val.key==(item.key||item.id)});hasOne&&(item.checked=!0)})}},{key:"dataReady",value:function(){this._mergeValue()}},{key:"components",value:function(){function loopItem(data){that._mergeValue(),data.map(function(item){item.checked&&(item.key=item.id||item.key,item.value=item.name||item.name,listValue.push($.extend(!0,{},item)),item.children&&loopItem(item.children))}),opts.filterParentNode&&(listValue=listValue.filter(function(item){return!item.isParent}))}var opts=this.options,that=this,listValue=[];opts.data.length&&(loopItem(opts.data),this.addCom([{el:"#transfer_tree_"+opts.vid,setting:$.extend(!0,{check:{enable:!0,chkboxType:{Y:"ps",N:"ps"}}},opts.treeSetting||{}),onChecked:function(self,result){var listView=Lego.getView("#transfer_list_"+opts.vid);listView&&(opts.filterParentNode&&(result=result.filter(function(item){return!item.isParent})),listView.options.data=Array.from(result),listView.refresh()),"function"==typeof opts.onChange&&opts.onChange(this.context,result)},data:opts.data},{el:"#transfer_list_"+opts.vid,removeAble:!0,onClose:function(self,result){var treeView=$.fn.zTree.getZTreeObj("transfer_tree_"+opts.vid);if(treeView){var treeNode=treeView.getNodeByParam("id",result,null);treeView.checkNode(treeNode,!treeNode.checked,!0),"function"==typeof opts.onChange&&opts.onChange(this.context,this.data)}},data:listValue}]),opts.showSearch&&this.addCom({el:"#transfer_search_"+opts.vid,style:{display:"fixed"==opts.showSearch?"table":"none"},size:"sm",onSearch:function(self,result){if("function"==typeof opts.onSearch)opts.onSearch(that,result);else{var treeView=Lego.getView("#transfer_tree_"+opts.vid);treeView&&treeView.search(result.keyword)}}}))}},{key:"render",value:function(){var opts=this.options,vDom=hx(_templateObject$32,opts.showSearch&&"fixed"!==opts.showSearch?hx(_templateObject2$30):"",val(opts.titles[0]),opts.showSearch?hx(_templateObject3$20,opts.vid):"",opts.vid,val(opts.titles[1]),opts.vid);return vDom}},{key:"showSearch",value:function(event){var target=$(event.currentTarget);this.$(".lego-search").toggle(0,function(){"取消"==target.text()?(target.text("搜索"),$(this).next().css({paddingBottom:40})):(target.text("取消"),$(this).next().css({paddingBottom:74}))})}},{key:"renderAfter",value:function(){var opts=this.options;this.$el.css({width:opts.width,height:opts.height}),this.$("#transfer_search_"+opts.vid).next().css({paddingBottom:74})}},{key:"getValue",value:function(){var listView=Lego.getView("#transfer_list_"+this.options.vid);return listView?listView.options.data:null}}]),Transfer}(Lego.UI.Baseview);Lego.components("transfer",Transfer);var _createClass$41=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject$33=_taggedTemplateLiteral$33(['\n        <div class="lego-tags">\n            ',"\n            ","\n        </div>\n        "],['\n        <div class="lego-tags">\n            ',"\n            ","\n        </div>\n        "]),_templateObject2$31=_taggedTemplateLiteral$33(['\n                <div class="lego-tag ','" id="','" title="','" onclick=','>\n                    <div class="lego-tag-text">\n                    <span>',"</span>\n                    ","\n                    </div>\n                </div>\n            "],['\n                <div class="lego-tag ','" id="','" title="','" onclick=','>\n                    <div class="lego-tag-text">\n                    <span>',"</span>\n                    ","\n                    </div>\n                </div>\n            "]),_templateObject3$21=_taggedTemplateLiteral$33(['<i title="移除" class="anticon anticon-close-circle lego-tag-close" onclick=',"></i>"],['<i title="移除" class="anticon anticon-close-circle lego-tag-close" onclick=',"></i>"]),_templateObject4$15=_taggedTemplateLiteral$33(['<buttons id="buttons_','"></buttons>'],['<buttons id="buttons_','"></buttons>']),Tags=function(_Lego$UI$Baseview){function Tags(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$41(this,Tags);var options={color:"",closable:!0,readonly:!1,addBtnText:"添加标签 +",addBtnOption:{},onChange:function(){},onClickBtn:function(){},onClose:function(){},onAdd:function(){}};return Object.assign(options,opts),options.value&&(options.data=Array.from(options.value)),_possibleConstructorReturn$36(this,(Tags.__proto__||Object.getPrototypeOf(Tags)).call(this,options))}return _inherits$36(Tags,_Lego$UI$Baseview),_createClass$41(Tags,[{key:"components",value:function(){var opts=this.options,that=this;opts.readonly||this.addCom([$.extend({el:"#buttons_"+opts.vid,text:opts.addBtnText,type:"dashed",size:"sm",onClick:function(self,event){event.stopPropagation(),"function"==typeof opts.onClickBtn&&opts.onClickBtn(that,event)}},opts.addBtnOption)])}},{key:"render",value:function(){var _this2=this,opts=this.options;return this.vDom=hx(_templateObject$33,opts.data.map(function(item){return hx(_templateObject2$31,item.color?"lego-tag-"+item.color:"",item.key,item.value,_this2.onChange.bind(_this2),item.value,opts.closable?hx(_templateObject3$21,_this2.onClose.bind(_this2)):"")}),opts.readonly?"":hx(_templateObject4$15,opts.vid)),this.vDom}},{key:"addItem",value:function(){var obj=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},opts=this.options,hasOne=opts.data.find(function(item){return item.key==obj.key});hasOne||(opts.data.push(obj),"function"==typeof opts.onAdd&&opts.onAdd(this,obj))}},{key:"removeItem",value:function(id){var opts=this.options;opts.data=opts.data.filter(function(item){return item.key.toString()!==id}),this.refresh()}},{key:"getValue",value:function(){return this.options.data}},{key:"onClose",value:function(event){event.stopPropagation();
var target=$(event.currentTarget),opts=this.options,id=target.parent().parent().attr("id");"function"==typeof opts.onClose&&opts.onClose(this,id)}},{key:"onChange",value:function(event){event.stopPropagation();var target=$(event.currentTarget),opts=this.options,id=target.attr("id"),item=opts.data.find(function(item){return item.key.toString()==id});"function"==typeof opts.onChange&&opts.onChange(this,item)}}]),Tags}(Lego.UI.Baseview);Lego.components("tags",Tags),Lego.components({Baseview:Baseview,alert:Alert,avatar:Avatar,badge:Badge,buttons:Buttons,btngroup:Btngroup,btntoolbar:Btntoolbar,chkgroup:Chkgroup,collapse:fun,dropdown:Dropdown,dropdownbtn:Dropdownbtn,datepicker:Datepicker,editcom:Editcom,forms:Forms,facial:Facial,inputs:Inputs,listgroup:Listgroup,loading:Loading,modal:theModal,message:Message,navs:Navs,notification:Notification,popover:fun$1,progressbar:Progressbar,permis:permisObj,pagination:Pagination,reply:Reply,rating:Rating,search:Search,selects:Selects,steps:Steps,tooltip:fun$2,tables:Tables,tabs:Tabs,tree:Tree,treeselect:Treeselect,tags:Tags,transfer:Transfer,upload:Upload});var index=Lego.UI;module.exports=index;
